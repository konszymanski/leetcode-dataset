class Solution:
    def minimumTeachings(self, n: int, languages: List[List[int]], friendships: List[List[int]]) -> int:
        
        # Find which friendships can not communicate, i.e. which users need to be taught
        usersToBeTaught = set() # 0-indexed
        
        for f in friendships:
            f1 = set(languages[f[0] - 1])
            f2 = set(languages[f[1] - 1])
            if f1.isdisjoint(f2): #If there are no common languages between that pair of friends
                usersToBeTaught.add(f[0] - 1)
                usersToBeTaught.add(f[1] - 1)
                        
        if len(usersToBeTaught) == 0:
            return 0
        
        # For each language, how many people will I need to teach in usersToBeTaight?
        languageCounter = collections.defaultdict(int)
        
        for language in range(1, n + 1):
            for user in usersToBeTaught:
                if language not in languages[user]:
                    languageCounter[language] += 1
        
        # Find minimum of how many people I need to teach
        return min(languageCounter.values())