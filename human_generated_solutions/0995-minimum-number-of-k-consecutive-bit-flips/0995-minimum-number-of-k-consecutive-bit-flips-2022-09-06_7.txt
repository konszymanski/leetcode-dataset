class Solution:
    def minKBitFlips(self, nums: List[int], k: int) -> int:
        # Total number of flips
        res = 0
        # Total times the iteration index has been flipped
        flippedCount = 0

        for i, num in enumerate(nums):
          # Decrement flipped count for the current index when previous flips 
          # are outside of the window
          if i >= k and nums[i - k] > 1:
            nums[i - k] -= 2
            flippedCount -= 1
          
          # An even flipped count means that after all the previous flips, if 
          # any, the current number is now 0, which needs to be flipped
          if flippedCount % 2 == num:
            # K-bit flip is not possible if additional bits need to be flipped 
            # at the end of all valid window flips
            if i > len(nums) - k:
              return -1

            # Flip the current number and increment flipped count
            nums[i] += 2
            flippedCount += 1
            res += 1

        return res