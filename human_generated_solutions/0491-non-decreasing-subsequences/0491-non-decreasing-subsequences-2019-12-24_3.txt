from collections import defaultdict
class Solution:
    def findSubsequences(self, nums: List[int]) -> List[List[int]]:
        # graph 
        # nodes are index
        # edges are if greater than or eq
        
        # construct
        graph = defaultdict(list)
        for i, v in enumerate(nums):
            for j in range(i+1, len(nums)):
                if nums[j] >= v:
                    graph[i].append(j)
        
        # print(graph)
        res = set()
        stack = []
        def dfs(node):
            stack.append(nums[node])
            # print(node)
            
            if (len(stack) >= 2):
                com = tuple(stack)
                # print(com)
                res.add(com)
            
            if node in graph:  # prevent defaultdict adding key on access
                for nei in graph[node]:
                    dfs(nei)
            
            stack.pop()
        
        # dfs each root 
        for root in graph:
            dfs(root)
            
        return [list(tu) for tu in res]