class StockPrice:

    def __init__(self):
        self.latest_prices = {}
        self.time = 1
        self.min_prices = []
        self.max_prices = []
        heapify(self.min_prices)
        heapify(self.max_prices)

    def update(self, timestamp: int, price: int) -> None:
        self.latest_prices[timestamp] = price
        self.time = max(self.time, timestamp)
        heapq.heappush(self.min_prices, (price,timestamp))
        heapq.heappush(self.max_prices, (-price,timestamp))

    def current(self) -> int:
        return self.latest_prices[self.time]

    def maximum(self) -> int:
        top = self.max_prices[0]
        while self.latest_prices[top[1]] != -top[0]:
            heapq.heappop(self.max_prices)
            top = self.max_prices[0]
        return -top[0]

    def minimum(self) -> int:
        top = self.min_prices[0]
        while self.latest_prices[top[1]] != top[0]:
            heapq.heappop(self.min_prices)
            top = self.min_prices[0]
        return top[0]