class Solution:
    def longestZigZag(self, root: Optional[TreeNode]) -> int:
        res = 0
        if not root: return res
        q= deque() # node, isLeft, depth
        if root.left: 
            q.append((root.left,True,1))
        if root.right:
            q.append((root.right, False,1))
        
        while q:
            node,isleft,depth = q.popleft()
            res = max(res,depth)
            if isleft:
                if node.right: 
                    q.append((node.right,False,depth+1))
                if node.left:
                    q.append((node.left,True,1))
                
            else:
                if node.left:
                    q.append((node.left,True,depth+1))
                if node.right:
                    q.append((node.right,False,1))
        return res