class Solution {
public:
    int smallestChair(vector<vector<int>>& times, int targetFriend) {
        int n = times.size();

        // store persons start time, end time, original position
        vector<vector<int>> person;
        for(int i = 0; i < n; i++)
            person.push_back({times[i][0], times[i][1], i});

        // sort persons according to arrival time
        sort(person.begin(), person.end());

        // store empty chairs in min heap
        set<int> chair;
        for(int i = 0; i <= n; i++) chair.insert(i);

        // store occupied chair\'s end time
        set<vector<int>> occupied;
        for(int i = 0; i < n; i++) {

            // loop through occupied chairs to remove expired ones by checking
            // with curr arrival time and insert those chairs into heap 
            while(!occupied.empty()) {
                int x = (*occupied.begin())[0];
                int y = (*occupied.begin())[1];
                if(x > person[i][0]) break;
                chair.insert(y);
                occupied.erase(occupied.begin());
            }

            // check curr person for targetFriend
            if(person[i][2] == targetFriend) return (*chair.begin());

            // insert curr person in occupied and
            // remove occupied chair from heap
            occupied.insert({person[i][1], (*chair.begin())});
            chair.erase(chair.begin());
        }
        return 0;
    }
};