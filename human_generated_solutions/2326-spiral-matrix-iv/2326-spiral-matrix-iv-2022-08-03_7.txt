# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution:
    def spiralMatrix(self, m: int, n: int, head: Optional[ListNode]) -> List[List[int]]:
        # Initialize matrix with -1
        matrix = [[-1 for _ in range(n)] for _ in range(m)] 
        
        # Number of layers (times we need to move in spiral)
        layers = (min(m,n)+1)//2
        
        for layer in range(layers):
                 
            #Right
            
            for i in range(layer,n-layer):
                if head:
                    matrix[layer][i] = head.val
                    #print("Matrix : ", matrix)
                    head = head.next
                else: 
                    break
                
            # Down
            
            for i in range(layer+1,m-layer):
                if head:
                    matrix[i][n-layer-1] = head.val
                    #print("Matrix : ", matrix)
                    head = head.next
                else: 
                    break
                
            # Left
            
            for i in range(n-layer-2,layer-1,-1):
                if head:
                    matrix[m-layer-1][i] = head.val
                    #print("Matrix : ", matrix)
                    head = head.next
                else: 
                    break
                    
            # Up
            
            for i in range(m-layer-2,layer,-1):
                if head:
                    matrix[i][layer] = head.val
                    #print("Matrix : ", matrix)
                    head = head.next
                else: 
                    break
                    
        return matrix