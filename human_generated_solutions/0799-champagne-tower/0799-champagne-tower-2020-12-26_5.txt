class Solution:
    def champagneTower(self, poured: int, query_row: int, query_glass: int) -> float:
        
        @lru_cache(None)
        def fn(i, j):
            """Return wine poured into glass (i, j)."""
            if i == j == 0: return poured # boundary condition
            if j < 0 or j > i: return 0 # boundary condition 
            return max(0, fn(i-1, j-1)-1)/2 + max(0, fn(i-1, j)-1)/2
        
        return min(1, fn(query_row, query_glass))