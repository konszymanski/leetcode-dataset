class Solution:
    def mirrorReflection(self, p: int, q: int) -> int:
        
        if p == q:
            return 1
        
        height = q
        right, up = False, True
        
        while True:
            if height + q == p:
                if right and up:
                    return 1
                elif not right and up:
                    return 2
                else:
                    return 0
            elif height + q < p:            #  touch left or right border
                height += q
                right = not right
            else:                           # touch left or right border and go through top or bottom
                height +=  q - p
                right = not right
                up = not up