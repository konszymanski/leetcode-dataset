class UndergroundSystem {
public:
    void checkIn(int id, string stationName, int t) {
        _checkInData[id] = {stationName, t};
    }
    
    void checkOut(int id, string stationName, int t) {
        string& checkInStation = _checkInData[id].first;
        string fromTo = checkInStation + \'_\' + stationName;
        int new_duration = t - _checkInData[id].second;
        _fromTo_durations[fromTo]={_fromTo_durations[fromTo].first + new_duration, _fromTo_durations[fromTo].second + 1};
        //_fromTo_durations[fromTo] += {new_duration, 1};        
    }
    
    double getAverageTime(string startStation, string endStation) {
        string fromTo = startStation + \'_\' + endStation;
        return double(_fromTo_durations[fromTo].first) /  _fromTo_durations[fromTo].second;
    }
    
private:
    unordered_map<string, pair<int, int> > _fromTo_durations;
    unordered_map<int, pair<string, int> > _checkInData;
};