class Solution:
    def largestVariance(self, s: str) -> int:
        counter = Counter(s)
        res = 0
        
        for a, b in permutations(counter, 2):
            count_a, count_b = 0, 0
            remain_b = counter[b]
            for ch in s:
                if ch not in {a, b}:
                    continue
                if ch == a:
                    count_a += 1
                elif ch == b:
                    count_b += 1
                    remain_b -= 1
                # Kadane\'s Algorithm, modified
                if count_a < count_b and remain_b > 0:
                    count_a, count_b = 0, 0
                if count_b > 0:
                    res = max(res, count_a - count_b) 

        return res