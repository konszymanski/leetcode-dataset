# """
# This is MountainArray\'s API interface.
# You should not implement it, or speculate about its implementation
# """
#class MountainArray:
#    def get(self, index: int) -> int:
#    def length(self) -> int:

class Solution:
    def findInMountainArray(self, target: int, mountain_arr: \'MountainArray\') -> int:
        #Find peak element 
        #search in asc array [0:peak]
        #search in desc array [peak+1:]
        
        def binarySearch(arr, left, right, target):
            #Order-Agnostic Binary Search             
            isAsc = False
            if arr.get(left) < arr.get(right):
                isAsc = True
            
            while left <= right:
                mid = left + (right - left) // 2
                if target == arr.get(mid):
                    return mid
                
                if isAsc:
                    if target < arr.get(mid):
                        right = mid - 1
                    else:
                        left = mid + 1
                else:
                    if target > arr.get(mid):
                        right = mid - 1
                    else:
                        left = mid + 1
                                
            return -1
        
        def findPeak(arr):
            left, right = 0, arr.length() - 1
            
            while left <= right:
                mid = left + (right - left) // 2
                
                if arr.get(mid) < arr.get(mid+1):
                    left = mid + 1
                else:
                    right = mid - 1
            return left
        
        
        
        length = mountain_arr.length() - 1
        pivot = findPeak(mountain_arr)
        x = binarySearch(mountain_arr, 0, pivot, target)
        
        #if found in first half, then return index else check right half of pivot
        if x == -1:
            return binarySearch(mountain_arr, pivot+1, length, target)
        else:
            return x