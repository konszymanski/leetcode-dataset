class Solution:
    def buildMatrix(self, k: int, rowConditions: List[List[int]], colConditions: List[List[int]]) -> List[List[int]]:
        
        def topologicalSort(t):
            res = []
            indegrees = {i: 0 for i in range(1, k + 1)}
            noPrereqs = set()
            prereqs = rowConditions if t == \'R\' else colConditions
            
            for prereq, num in prereqs:
                indegrees[num] += 1
                
            for num in indegrees.keys():
                if indegrees[num] == 0:
                    noPrereqs.add(num)

            while noPrereqs:
                curr = noPrereqs.pop()
                res.append(curr)
                for prereq, num in prereqs:
                    if curr == prereq:
                        indegrees[num] -= 1
                        if indegrees[num] == 0:
                            noPrereqs.add(num)
            return res if len(res) == k else None

        topOrdRows = topologicalSort(\'R\')
        topOrdCols = topologicalSort(\'C\')
        if topOrdRows is None or topOrdCols is None:
            return []
             
        ans = [[0] * k for _ in range(k)]
        for i in range(k): 
            ans[topOrdRows.index(i + 1)][topOrdCols.index(i + 1)] = i + 1
        return ans
    # Time: O(V^2 + E) where V is k and E is the number of conditions
    # Space: O(V^2 + E)