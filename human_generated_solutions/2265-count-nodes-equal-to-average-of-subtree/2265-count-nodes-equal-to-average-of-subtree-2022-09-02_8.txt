class Solution:
    def averageOfSubtree(self, root: Optional[TreeNode]) -> int:
        
        _, _, result = dfs(root)
        return result

def dfs(node):
    
    # root is none therefore we have no sum with and below it
    # as well as no valid nodes and now nodes with the condition
    if node is None:
        return 0, 0, 0
    
    # go deeper
    left_sum, left_amount, left_number = dfs(node.left)
    right_sum, right_amount, right_number = dfs(node.right)
    
    # now we need to compute the new number of nodes that
    # met the cindition
    number = left_number + right_number
    
    # calculate the new amount of nodes
    new_amount = left_amount + right_amount + 1
    
    # calculate the new tree sum
    new_sum = left_sum + right_sum + node.val
    
    # check whether our average is equal to our value
    if new_sum//new_amount == node.val:
        number += 1
    
    return new_sum, new_amount, number