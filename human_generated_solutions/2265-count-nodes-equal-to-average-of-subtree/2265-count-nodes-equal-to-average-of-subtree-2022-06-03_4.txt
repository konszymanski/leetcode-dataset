class Solution(object):
    def averageOfSubtree(self, root):
        self.count = 0
        def dfs(root):
            if root is None: return 0, 0 
            
            leftSum, leftCount = dfs(root.left)
            rightSum, rightCount = dfs(root.right)
            
            current_sum = root.val + leftSum + rightSum
            current_count = 1 + leftCount + rightCount
            
            if root.val == current_sum/current_count:
                self.count += 1
            return current_sum, current_count
        dfs(root)
        return self.count