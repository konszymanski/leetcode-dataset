class Solution:
    
    def averageOfSubtree(self, root: Optional[TreeNode]) -> int:
        self.count = 0
        def recursion(node):
            if node == None:
                return [0, 0]
            val = node.val
            left = recursion(node.left)
            right = recursion(node.right)
            left_val, left_num = left[0], left[1]
            right_val, right_num = right[0], right[1]
            val += left_val
            val += right_val
            if node.val == val // (left_num + right_num + 1):
                self.count += 1
            return [val, left_num + right_num + 1]
        recursion(root)
        return self.count