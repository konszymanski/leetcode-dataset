class Solution:
    def countTriplets(self, arr: List[int]) -> int:
        m = dict()
        cur_xor = 0 #keep track on subarray[0...i] xor result
        ret = 0
        m[0] = [-1] #in case subarray[0...i] xor == 0
        for i, n in enumerate(arr):
            cur_xor ^= n
            lst = m.setdefault(cur_xor, [])
            for start in lst:
                ret += i - start - 1 # we know subarray[start + 1...i] xor == 0
            lst.append(i)
        return ret