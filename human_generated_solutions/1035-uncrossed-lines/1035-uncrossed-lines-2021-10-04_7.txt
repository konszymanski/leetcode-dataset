class Solution:
    def maxUncrossedLines(self, nums1: List[int], nums2: List[int]) -> int:
        e1=len(nums1)
        e2=len(nums2)
        @lru_cache(None,None)
        def dfs(s1,s2):
            best=-float(\'inf\')
            if s1>=e1 or s2>=e2:
                return 0
            temp=[]
            op1=0
			#finding element in array2 which is equal to element in array1 from where we want to draw line
            for idx in range(s2,e2):
                if nums2[idx]==nums1[s1]:
                    temp.append(idx)
			#drawing line to all those element and checking which gives maximum value
            for j in temp:
                op1=1+dfs(s1+1,j+1)
                best=max(op1,best)
			#choosing to not draw line from current element of array1
            op2=dfs(s1+1,s2)
			#returning max of both options.
            return max(op2,best)
        return dfs(0,0)