from sortedcontainers import SortedList

class Solution:
    def minimumDeviation(self, nums: List[int]) -> int:
        sortedList = SortedList([])
        for num in nums:
            if num & 1:
                sortedList.add(num*2)
            else:
                sortedList.add(num)

        minDev = sys.maxsize
        while True:
            maxVal, minVal = sortedList[-1], sortedList[0]
            minDev = min(minDev, maxVal - minVal)
            # If maxVal could be further decreased then only deviation would be decreased. Else just break the iteration.
            if not maxVal & 1:
                sortedList.pop()
                sortedList.add(maxVal//2)
            else:
                break
        return minDev