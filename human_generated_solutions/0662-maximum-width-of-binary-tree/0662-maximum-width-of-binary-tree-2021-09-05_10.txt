from collections import deque

class Solution:
    def widthOfBinaryTree(self, root: TreeNode) -> int:
        queue = deque([[root, 0]])
        maxWidth = 0
        while len(queue) > 0: 
            length = len(queue)
            leftmost = queue[0][1]
            rightmost = queue[-1][1]
            levelWidth = rightmost - leftmost + 1
            maxWidth = max(maxWidth, levelWidth)
            for i in range (length): 
                node, bits = queue.popleft() 
                bits <<= 1
                if node.left: 
                    queue.append([node.left, bits]) 
                if node.right: 
                    bits |= 1
                    queue.append([node.right, bits]) 
        return maxWidth