class MyCalendarTwo {
public:
    MyCalendarTwo() {

	}

	bool book(int start, int end) {
		++calendar[start];
		--calendar[end];

		int counter = 0;
		for (auto iter = calendar.begin(); iter != calendar.end(); ++iter) {
			counter += iter->second;
			
			if (counter > 2) {
				--calendar[start];
				++calendar[end];

				if (calendar[start] == 0) calendar.erase(start);
				if (calendar[end] == 0)calendar.erase(end);
				
				return false;
			}
		}

		return true;
	}
	
private:
	map<int,int> calendar;
};