class Solution:
    def maxAncestorDiff(self, root: Optional[TreeNode]) -> int:
        ans = 0 
        stack = [(root, inf, -inf)]
        while stack: 
            node, lo, hi = stack.pop()
            lo = min(lo, node.val)
            hi = max(hi, node.val)
            ans = max(ans, node.val - lo, hi - node.val)
            if node.left: stack.append((node.left, lo, hi))
            if node.right: stack.append((node.right, lo, hi))
        return ans