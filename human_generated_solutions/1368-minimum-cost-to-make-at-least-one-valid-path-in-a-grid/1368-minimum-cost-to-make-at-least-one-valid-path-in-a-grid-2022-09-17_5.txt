class Solution:
    def minCost(self, grid: List[List[int]]) -> int:
        m, n = len(grid), len(grid[0])
        DIRECTIONS = [(1,0,1), (2,0,-1), (3,1,0), (4,-1,0)]
        dist = [[0 if (i, j) == (0,0) else 10000 
                 for j in range(n)] for i in range(m)] 
        queue = [(0, 0, 0)]
        while queue:
            curr_dist, i, j = heapq.heappop(queue)
            for sign, i_delt, j_delt in DIRECTIONS:
                i2, j2 = i + i_delt, j + j_delt
                if i2 < 0 or j2 < 0 or i2 >= m or j2 >= n:
                    continue
                new_cost = curr_dist + 1 if grid[i][j] != sign else curr_dist
                if new_cost < dist[i2][j2]:
                    dist[i2][j2] = new_cost
                    heapq.heappush(queue, (new_cost, i2, j2))
        return dist[m-1][n-1]