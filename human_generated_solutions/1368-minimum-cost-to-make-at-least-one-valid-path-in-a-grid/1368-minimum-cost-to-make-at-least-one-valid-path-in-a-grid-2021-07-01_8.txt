from queue import PriorityQueue
class Solution:
    def minCost(self, grid: List[List[int]]) -> int:
        directions={1:(0,1),2:(0,-1),3:(1,0),4:(-1,0)}
        m,n=len(grid),len(grid[0])
        pq=PriorityQueue()
        pq.put((0,0,0))
        distances={(i,j):sys.maxsize for i in range(m) for j in range(n)}
        distances[(0,0)]=0
        while pq.qsize()>0:
            cost,i,j=pq.get()
            for d in directions:
                new_i=i+directions[d][0]
                new_j=j+directions[d][1]
                if grid[i][j]==d:
                    weight=0
                else:
                    weight=1
                if 0<=new_i<m and 0<=new_j<n and cost+weight<distances[(new_i,new_j)]:
                    pq.put((cost+weight,new_i,new_j))
                    distances[(new_i,new_j)]=cost+weight
        return distances[(m-1,n-1)]