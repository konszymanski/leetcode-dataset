from collections import defaultdict

class Solution:
    def uniqueLetterString(self, s: str) -> int:
        indexes = defaultdict(list)
        for i, c in enumerate(s):
            indexes[c].append(i)
        
        result = 0
        for c in indexes:
            indexes[c] = [-1] + indexes[c] + [len(s)]
            for i in range(len(indexes[c]) - 2):
                r = indexes[c][i:i + 3]
                result += (r[1] - r[0]) * (r[2] - r[1])
        return result