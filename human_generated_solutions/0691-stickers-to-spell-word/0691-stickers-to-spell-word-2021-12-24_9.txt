from collections import Counter
from functools import lru_cache
class Solution:
    def minStickers(self, stickers: List[str], target: str) -> int:
        n = len(stickers)
        # Convert words to frequency counter
        stickers = [Counter(sticker) for sticker in stickers]
        @lru_cache(None)
        def dp(s):
            if s==\'\': return 0
            cs = Counter(s)
            ans = float(\'inf\')
            for sticker in stickers:
                # Skip if the first character of the required string is not present
                if s[0] not in sticker: continue
                # Concatenating the elemented with frequnecy after the 
                # frequency reduction due to stickers[i] in string s
                # and conducting dp for that
                ans = min(ans,1+dp(\'\'.join(ch*ct for ch,ct in sorted((cs-sticker).items()))))
            return ans
            
        val =  dp(\'\'.join(sorted(target)))
        # return -1 if a valid answer does not exist
        return -1 if val==float(\'inf\') else val