l, r = 0, sum(batteries) // n + 1
        
        def check(x):
            return sum(min(x, b) for b in batteries) >= n * x  # required capacity
        
        while l <= r:
            mid = (l+r)//2
            if check(mid):
                l = mid+1
            else:
                r = mid-1
        return r