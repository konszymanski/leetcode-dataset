class Solution {
private:
    unordered_map<string,string> codeURL;
    string chars;
    int n;
    int Default_Length = 6;
    
    string generateRandom(int len){
        // generatre random string
        string randm = "";
        for(int i=0;i<len;i++){
            int index = rand()%n + 0;
            randm.push_back(chars[index]);
        }
        return randm;
    }
    
    string getCode(string& shortURL){
        //split string with forward slash(/) and get the last element i.e., code
        string temp="";
        int size = shortURL.size();
        vector<string> shorts;
        for(int i=0;i<size;i++){
            if(shortURL[i] == \'/\'){
                shorts.push_back(temp);
                temp = "";
            }else{
                temp.push_back(shortURL[i]);
            }
        }
        shorts.push_back(temp);
        int sz = shorts.size();
        return shorts[sz-1];
    }
    
public:
    Solution(){
        chars = "";
        for(char i = \'a\'; i<= \'z\';i++){
            chars.push_back(i);
        }
        for(char i = \'A\'; i<= \'Z\';i++){
            chars.push_back(i);
        }
        for(char i = \'0\'; i<= \'9\';i++){
            chars.push_back(i);
        }
        n = chars.size();
        srand(time(0));
    }
    
    // Encodes a URL to a shortened URL.
    string encode(string longUrl) {
        string hash = generateRandom(Default_Length);
        while(codeURL.find(hash) != codeURL.end()){
            // if random code is already present in the map then generate new, repeat it untill you find new random code
            hash = generateRandom(Default_Length);
        }
        codeURL[hash] = longUrl;
        string shortURL = "http://tinyurl.com/"+hash;
        return shortURL;
    }

    // Decodes a shortened URL to its original URL.
    string decode(string shortUrl) {
        string code = getCode(shortUrl);
        return codeURL[code];
    }
};