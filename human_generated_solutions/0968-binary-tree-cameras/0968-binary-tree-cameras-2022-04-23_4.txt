class Solution {
public:
    #define I_NEED_CAMERA -1
    #define I_AM_COVERED 1
    #define I_HAVE_CAMERA 0
    
    int camera = 0;
    
    int calc(TreeNode* root){
        if(root == NULL) return I_AM_COVERED;
        int lchild = calc(root->left); // take information from left child
        int rchild = calc(root->right); // take information from right child
        
        if(lchild == I_NEED_CAMERA || rchild == I_NEED_CAMERA){
            camera++;
            return I_HAVE_CAMERA;
        }
        
        if(lchild == I_HAVE_CAMERA || rchild == I_HAVE_CAMERA) return I_AM_COVERED;
        
        return I_NEED_CAMERA;
    }
    
    int minCameraCover(TreeNode* root) {
        int rootSays = calc(root);
        if(rootSays == I_NEED_CAMERA) camera++;
        return camera;
    }
};