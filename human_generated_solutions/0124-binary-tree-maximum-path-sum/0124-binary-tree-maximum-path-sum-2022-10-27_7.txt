class Solution:
    def maxPathSum(self, root: Optional[TreeNode]) -> int:
        self.maxsum = -inf

        #get the continuous path sum with "node" as the root/middle of the path
        def pathsum(node):
            if not node:
                return 0

            #no point in adding negetive path
            left = max(pathsum(node.left),0)
            right = max(pathsum(node.right),0)

            #see if the path with "node" as root is maximum
            self.maxsum = max(self.maxsum,node.val+left+right)

            #only one of the left or right subtree will allow continous path
            #when attached to the upper subtree
            return node.val+max(left,right)

        pathsum(root)
        return self.maxsum