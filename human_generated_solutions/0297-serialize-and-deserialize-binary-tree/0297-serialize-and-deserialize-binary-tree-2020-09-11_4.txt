def serialize(self, root):
        if not root: return []
        data = []
        # use deque for fast popleft / bfs traversal 
        queue = deque([root])
        while queue:
            node = queue.popleft()
            if node: 
                data.append(node.val)
                queue.append(node.left)
                queue.append(node.right)
            else:
                data.append(\'#\')
        #remove trailing \'#\'
        while data[-1] == \'#\':
            data.pop()
        return data
    
    def deserialize(self, data):
        if not data: return []
        root = TreeNode(data[0])
        i = 1
        queue = deque([root])
        while queue and i <= len(data) -1:
            node = queue.popleft()
            if data[i] != \'#\':
                left = TreeNode(data[i])
                node.left = left
                queue.append(left)
            i += 1
            if i > len(data)-1:
                break
            if data[i] != \'#\':
                right = TreeNode(data[i])
                node.right = right
                queue.append(right)
            i += 1
        return root