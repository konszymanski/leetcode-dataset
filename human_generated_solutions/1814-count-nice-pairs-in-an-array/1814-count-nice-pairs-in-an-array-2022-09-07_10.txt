from collections import  defaultdict

class Solution:
    def countNicePairs(self, nums: list[int]) -> int:

        # Reverse number
        def reverseInt(num):
            res = 0
            while num > 0:
                num, remains = divmod(num, 10)
                res = res * 10 + remains

            return res

        # Initialize a dict to keep track of count of previous number based on the difference
        prev = defaultdict(int)

        # Intialize the result
        res = 0

        # Iterate through all numbers
        for num in nums:
            
            # Calculate the difference
            diff = num - reverseInt(num)

            # Add the count of previous numbers that match the difference to the result and increment count of numbers that have such difference by 1
            res, prev[diff] = res + prev[diff], prev[diff] + 1

        return res % (10 ** 9 + 7)