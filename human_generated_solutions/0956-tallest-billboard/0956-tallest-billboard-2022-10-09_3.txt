class Solution:
    def tallestBillboard(self, rods: List[int]) -> int:
        numRods = len(rods)
        
        @cache
        def dp(idx: int, difference: int) -> int:
            nonlocal rods, numRods
            # When we reach the end, if the 2 supports are equal, we return 0
            # else, we return -infinity
            if idx == numRods:
                if not difference:
                    return 0
                return -inf
            # If we consider rods[idx + 1] for our support
            res1 = rods[idx] + dp(idx + 1, difference + rods[idx])
            # If we consider rods[idx + 1] for the opposite support
            res2 = dp(idx + 1, difference - rods[idx])
            # If we skip rods[idx + 1]
            res3 = dp(idx + 1, difference)
            # Return max of the three conditions because the question
            # asks us to build the tallest billboard
            return max(res1, res2, res3)
        
        return dp(0, 0)