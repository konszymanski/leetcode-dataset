class Solution:
    def countPalindromicSubsequences(self, s: str) -> int:
        def recursion(i,j):
		#whenever the starting index of string is greater than the last index of string
            if i > j:
                return 0
			#for the string of length 1 there is only one palidrome
            if i == j :
                return 1
			# as said in explaination if a part is not equal to c part then the palidromes is equal to 
			#cnt(a+b) + cnt(b+c) - cnt(b)
            if s[i] != s[j]:
                return recursion(i+1,j) + recursion(i,j-1) - recursion(i+1,j-1)
            else:
			# cheching if the equal part of the string lies in between of the string or not from both starting index and last index
                first = i+1
                while first < j and s[first] != s[i]:
                    first += 1
                last = j - 1
                
                while last > i and s[last] != s[j]:
                    last -= 1
                # if there is no occurence of repeating part then the number of palidromic subsequences is
				#cnt(b) + 2
                if first == j:
                    return 2*recursion(i+1,j-1) + 2
				#if there is just one repeatition then the a alone if already counted as palidrome so its count be
				#cnt(b) + 1
                elif first == last:
                    return 2*recursion(i+1,j-1) + 1
				# if there are multiple ocuurences then delete those occurences by deleting number of palidromes between that part
				# cnt(b) - cnt(first,last)
                else:
                    return 2*recursion(i+1,j-1) - recursion(first+1,last-1)
        
        return recursion(0,len(s)-1) % (10**9 + 7)