import math

class Solution(object):
    def numSquares(self, n):
        def get_low_squares(n):
            k = int(math.sqrt(n))
            squares = []
            for i in range(1, k+1):
                squares.append(i**2)
            return squares

        def helper(n):
            squares = get_low_squares(n)
            nodes, mem = [n], set([])
            output = 0
            while len(nodes) > 0:
                output += 1
                temp = []
                for node in nodes:
                    if node not in mem:
                        mem.add(node)
                        for num in squares:
                            t = node-num
                            if t == 0:
                                return output
                            if t < 0:
                                continue
                            if t not in mem:
                                temp.append(t)
                nodes = temp
        return helper(n)