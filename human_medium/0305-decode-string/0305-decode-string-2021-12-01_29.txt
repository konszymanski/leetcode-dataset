class Solution:
    def decodeString(self, s: str) -> str:
        stack = []
        num, token = "", ""
        for ch in s:
            if ch.isdigit():
                num += ch
            elif ch.isalpha():
                token += ch 
            elif ch == "[":
                stack.append((token, int(num) if num else 1))
                num, token = "", ""
            else:
                prevToken, freq = stack.pop()
                token = prevToken + freq*token 
                num = ""
        return token