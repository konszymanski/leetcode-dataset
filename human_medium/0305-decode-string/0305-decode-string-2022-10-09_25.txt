"""
thinking: when we go through the s, if we meet "[", we should start over, because it is a 
new world. However, we should always track the previos string and previous number

as a result, the intuitive is try to use the stack, because it start from the nested
-------------
Algorithm:
step1: initial a stack, a curr_s, and a num
step2: if we meet a number, then we calculate it
       if we meet a "[":
        -> append the curr_s and curr_num, later on it will become the previois
        -> initialize the curr_s and num, because it stack track the next nested
       if we meet a "]":
        start to pop
       if we meet a character:
        -> append to the curr_s
step3: return curr_s
"""


class Solution:
    def decodeString(self, s: str) -> str:
        curr_s = ""
        curr_n = 0
        stack = []
        for char in s:
            if char.isdigit():
                curr_n = curr_n * 10 + int(char)
            elif char == "[":
                stack.append((curr_s, curr_n))
                curr_s = ""
                curr_n = 0
            elif char == "]":
                prev_s, prev_n = stack.pop()
                curr_s = prev_s + prev_n * curr_s
            else:
                curr_s += char
        return curr_s