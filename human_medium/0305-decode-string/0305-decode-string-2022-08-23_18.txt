class Solution:
    def decodeString(self, s: str) -> str:
        stack=[]
        num=0
        string=\'\'
        for x in s:
            ordx=ord(x)
            if ordx>=ord(\'a\') and ordx<=ord(\'z\'): # is a letter
                string+=x # append it to the current level string
            elif ordx>=ord(\'0\') and ordx<=ord(\'9\'): # is a number
                num=num*10+int(x) # append it to the current level number
            elif x==\'[\':
                # start a lower level, push string and num to stack
                stack.append(string)
                stack.append(num)
                # reset 
                num=0
                string=\'\'
            else: # \']\', end of a lower level
                lower_level_string=string*stack.pop() # decode this bracket
                string=stack.pop()+lower_level_string # append the decoded bracket to string before the bracket, which is of upper level
        return string