def check(g1, g2):
    if g1 == g2: return False
    
    count = 0
    for i in range(len(g1)):
        count += g1[i]==g2[i]
    return count == len(g1)-1
            


class Solution:
    def minMutation(self, startGene: str, endGene: str, bank: List[str]) -> int:
        bank = set(bank)
        if endGene not in bank: return -1
        
        memo = {}
        
        def dp(cur, seen):
            if cur in memo: return memo[cur]
            if cur == endGene: return 0
            
            ans = None
            
            for gene in bank:
                if gene in seen: continue
                if check(cur, gene):
                    seen.add(gene)
                    res = dp(gene, seen)
                    if res != -1:
                        ans = res if ans is None else min(ans, res)
                    seen.remove(gene)
                    if ans == 0: break
            
            if ans is None: ans = -1
            else: ans += 1
            
            if ans != -1:
                memo[cur] = ans
            return ans
        res =  dp(startGene, set())
        return res