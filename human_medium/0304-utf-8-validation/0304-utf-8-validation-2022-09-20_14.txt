class Solution:
    __bytes = [\'0\', \'110\', \'1110\', \'11110\']
    __following = \'10\'
    def validUtf8(self, data: List[int]) -> bool:
        memory = [False, False, False]
        for i in data:
			# convert to bin string
			b = f"{i:08b}"
            # if followed n-1 bytes with the most significant 2 bits != 10
            if any(memory) and b[:2]!=Solution.__following : return False
            # if not n_bytes character by any chance
            if not any(memory) and b[0]!=Solution.__bytes[0] and b[:3]!=Solution.__bytes[1] and \\
            b[:4]!=Solution.__bytes[2] and b[:5]!=Solution.__bytes[3]: return False
            
            if all(memory): memory = [False, False, False]
            elif memory[0] and memory[1]: memory[:2] = [False, False]
            elif memory[0]: memory[0] = False
            elif memory[1]: memory[0] = True
            elif memory[2]: memory[1] = True
            else:
                if b[:3]==Solution.__bytes[1]: memory[0] = True
                elif b[:4]==Solution.__bytes[2]: memory[1] = True
                elif b[:5]==Solution.__bytes[3]: memory[2] = True
        return False if any(memory) else True