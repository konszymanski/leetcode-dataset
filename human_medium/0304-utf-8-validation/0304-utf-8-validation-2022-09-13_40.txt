class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        binary = []
        for d in data:
            x = str(bin(d))[2:]
            if len(x)!=8:
                x = "0"*(8-(len(x))) + x
            binary.append(x)
        n = len(binary)
        i = 0
        
        while i<n:
            if binary[i][0] == "1":
                byteCount = len(binary[i].split("0",1)[0]) - 1
                if byteCount == 0 or byteCount > 3:
                    return False
                while byteCount>0:
                    i+=1
                    if i==n or not binary[i].startswith("10"):
                        return False
                    byteCount -=1
            i+=1
        return True