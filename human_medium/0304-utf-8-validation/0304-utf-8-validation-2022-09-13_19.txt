from typing import List

class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        data = iter(data)
        val = next(data)
        while val < 256:
            val //= 8
            if val == 30:
                if next(data, 0) // 64 != 2: return False
                if next(data, 0) // 64 != 2: return False
                if next(data, 0) // 64 != 2: return False
                val = next(data, 256)
                continue
            val //= 2
            if val == 14:
                if next(data, 0) // 64 != 2: return False
                if next(data, 0) // 64 != 2: return False
                val = next(data, 256)
                continue
            val //= 2
            if val == 6:
                if next(data, 0) // 64 != 2: return False
                val = next(data, 256)
                continue
            val //= 4
            if val == 0:
                val = next(data, 256)
            else:
                return False
        return True