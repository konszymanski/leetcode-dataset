class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        n_byte_left = 0
        for num in data:
            num %= 256
            byte = format(num, \'08b\')
            # if this byte is leading byte
            if n_byte_left == 0:
                # 1-byte character
                if byte[0] == \'0\':
                    continue
                # n-byte character
                if byte[0:2] == \'11\':
                    n_byte_left = 1
                    # count n
                    for c in byte[2:]:
                        if c == \'1\':
                            n_byte_left += 1
                        else:
                            break
                    # n cannot be greater than 4
                    if n_byte_left > 3:
                        return False
                # undefined-byte character
                else:
                    return False
            #if this byte is not leading byte
            else:
                # count how many byte left
                if byte[0:2] == \'10\':
                    n_byte_left -= 1
                else:
                    return False
        return n_byte_left == 0