class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        
        def check(nums):
            if not nums: return True
            start = format(nums[0],\'08b\')
            if len(nums) == 1: return start[0] == \'0\'
            
            numOnes = 0
            for i in start:
                if i != \'1\': break
                numOnes += 1
                
            if numOnes == 1 or numOnes > 4: return False
            if numOnes == 0: return start[0] == \'0\' and check(nums[1:])
            if start[:numOnes + 1] == \'1\' * numOnes + \'0\' and all(format(nums[i],\'08b\')[:2] == \'10\' for i in range(1, numOnes)): return check(nums[numOnes:])

                
            return False
        
        return check(data)