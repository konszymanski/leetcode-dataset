class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        L, i = len(data), 0
        
        while i < L:
            curr = \'{0:08b}\'.format(data[i])
            
            if curr.startswith(\'0\'):
                i += 1
            elif curr.startswith(\'110\'):
                if i + 1 >= L: return False
                
                next1 = \'{0:08b}\'.format(data[i + 1])
                if next1.startswith(\'10\'): i += 2
                else: return False
            elif curr.startswith(\'1110\'):
                if i + 1 >= L or i + 2 >= L: return False
                
                next1, next2 = \'{0:08b}\'.format(data[i + 1]), \'{0:08b}\'.format(data[i + 2])
                if next1.startswith(\'10\') and next2.startswith(\'10\'): i += 3
                else: return False
            elif curr.startswith(\'11110\'):
                if i + 1 >= L or i + 2 >= L or i + 3 >= L: return False
                
                next1, next2, next3 = \'{0:08b}\'.format(data[i + 1]), \'{0:08b}\'.format(data[i + 2]), \'{0:08b}\'.format(data[i + 3])
                if next1.startswith(\'10\') and next2.startswith(\'10\') and next3.startswith(\'10\'): i += 4
                else: return False
            else:
                return False
        
        return True