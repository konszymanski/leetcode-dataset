class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        case = dict()
        case["11110"] = ["10","10","10"]
        case["1110"] = ["10","10"]
        case["110"] = ["10"]
        case["0"] = []
        i = 0
        while i < len(data):
            x = "{0:08b}".format(data[i])
            if x[:5] in case:
                expecting = case["11110"]
            elif x[:4] in case:
                expecting = case["1110"]
            elif x[:3] in case:
                expecting = case["110"]
            elif x[0] in case:
                expecting = case["0"]
            else:
                return False
            sub_data = data[i+1:i+len(expecting)+1]
            
            if len(sub_data) != len(expecting):
                return False
            
            for one_s,other_s in zip(sub_data, expecting):
                one_s = "{0:08b}".format(one_s)[:2]
                if one_s != other_s:
                    return False
            
            i = i + 1 + len(expecting)
            
        return True