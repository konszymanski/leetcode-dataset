class Solution:
    def validUtf8(self, data: List[int]) -> bool:
        
        i = 0
        while i < len(data):
            if data[i] & (1 << 7) == 0:
                i += 1
            elif data[i] & (1 << 6) == 0:
                return False
            elif data[i] & (1 << 5) == 0:
                if (i + 1 < len(data)) and ((data[i+1] >> 6) & 3 == 2):
                    i += 2
                else:
                    return False
            elif data[i] & (1 << 4) == 0:
                if (i + 2 < len(data)) and ((data[i+1] >> 6) & 3 == 2) and ((data[i+2] >> 6) & 3 == 2):
                    i += 3
                else:
                    return False
            elif data[i] & (1 << 3) == 0:
                if i + 3 < len(data) and ((data[i+1] >> 6) & 3 == 2) and ((data[i+2] >> 6) & 3 == 2) and ((data[i+3] >> 6) & 3 == 2):
                    i += 4
                else:
                    return False
            else:
                return False
        return True