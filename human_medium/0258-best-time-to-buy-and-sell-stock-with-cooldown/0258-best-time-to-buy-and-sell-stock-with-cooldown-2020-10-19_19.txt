import functools
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        
        @functools.lru_cache(None)  
        def maximize_profit(i, bought=False, buy_value=None):
            if i >= len(prices):        # Base Case
                return 0
				
            if not bought:
			# Buy the stock or leave the stock
                return max(maximize_profit(i+1, True, prices[i]), maximize_profit(i+1, False))

            if bought:
			# Sell the stock and jump 2 day ahead (cooldown period) or retain the stock
                return max((prices[i] - buy_value) + maximize_profit(i+2, False, 0), maximize_profit(i+1, True, buy_value))

        return maximize_profit(0)