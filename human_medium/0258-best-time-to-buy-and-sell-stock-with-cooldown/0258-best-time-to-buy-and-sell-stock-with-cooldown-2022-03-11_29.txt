class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        n = len(prices)
        @lru_cache(None)
        def dp(i, holding): # holding means at that time, whether we hold the stock or not
            if i >= n:
                return 0
            if holding:
                return max(dp(i+1, holding), prices[i] + dp(i+2, 0))
            else:
                return max(dp(i+1, holding), -prices[i] + dp(i+1, 1))
        
        return dp(0,0)