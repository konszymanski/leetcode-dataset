class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        
        N = len(prices)
        memo = {}
        
        def memoize(pos=0, bought = False):
            
            if pos >= N:        # If we go out of bounds, return 0 because we can\'t have any profit.
                return 0
            
            if (pos, bought) in memo:
                return memo[(pos,bought)]     
			
			
            if bought:
                sell = memoize(pos+2, not bought) + prices[pos]  
                cool = memoize(pos+1, bought)
                memo[(pos, bought)] = max(sell, cool)
				# If we have already bought, then our choices are sell or cooldown. 
            
            else:
                buy = memoize(pos+1, not bought) - prices[pos]
                cool = memoize(pos+1, bought)
                memo[(pos, bought)] = max(buy, cool)
				# if we haven\'t bought, then our choices are buy or cooldown.
            
            return memo[(pos,bought)]
        
        return memoize()