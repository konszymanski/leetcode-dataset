class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        memo = {}
        def dp(i, coolDown, holding):
#             base case
            if i == len(prices):
                return 0
            if (i, coolDown, holding) not in memo:
                if coolDown:
                    memo[(i, coolDown, holding)] = dp(i+1, 0, holding)
                else:
                    do_nothing = dp(i+1, coolDown, holding)
                    do_something = 0
                    if holding:
                        do_something = prices[i] + dp(i+1, 1, 0)
                    else:
                        do_something = -prices[i] + dp(i+1, 0, 1)
                    memo[(i, coolDown, holding)] = max(do_something, do_nothing)
            return memo[(i, coolDown, holding)]
        return dp(0, 0, 0)