class Solution:
    def dp(self, A, i, dp):
        if i in dp:
            return dp[i]

        if i >= len(A):
            return 0

        c1 = 0
        for j in range(i + 1, len(A)):
            profit = (A[j] - A[i]) + self.dp(A, j + 2, dp)
            c1 = max(c1, profit)

        c2 = self.dp(A, i + 1, dp)
        dp[i] = max(c1, c2)
        return dp[i]

    def maxProfit(self, prices):
        dp = {}
        return self.dp(prices, 0, dp)