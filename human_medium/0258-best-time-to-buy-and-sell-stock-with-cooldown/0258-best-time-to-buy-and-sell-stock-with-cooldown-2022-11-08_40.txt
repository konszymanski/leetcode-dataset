class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        max_sell = 0
        max_buy = 0
        prev_buy = 0

        for i in range(len(prices)-1,-1,-1):
            buf_max_sell = max(max_sell,prev_buy+prices[i])
            buf_max_buy = max(max_buy,max_sell-prices[i])
            max_sell,max_buy,prev_buy = buf_max_sell,buf_max_buy,max_buy
        
        return max_buy