def get_bit_repr_for_word(w):
    bit_repr = 0
    for char in w:
        bit_repr |= 1 << (ord(char) - ord("a"))
    return bit_repr

def doesnt_have_common_letter(w1_repr, w2_repr):
    return w1_repr & w2_repr == 0

class Solution:
    def maxProduct(self, words: List[str]) -> int:
        bit_repr_to_len = collections.defaultdict(int)
        for w in words:
            w_length = len(w)
            w_bit_repr = get_bit_repr_for_word(w)
            bit_repr_to_len[w_bit_repr] = max(w_length, bit_repr_to_len[w_bit_repr])
        
        best = 0
        for (w1_repr, len1), (w2_repr, len2) in itertools.combinations(bit_repr_to_len.items(), 2):
            if doesnt_have_common_letter(w1_repr, w2_repr):
                best = max(best, len1 * len2)
        return best