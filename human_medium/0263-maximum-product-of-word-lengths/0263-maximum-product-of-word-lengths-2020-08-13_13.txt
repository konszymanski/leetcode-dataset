class Solution:
    def maxProduct(self, words: List[str]) -> int:
        mp = dict()
        for word in words: 
            for c in word:
                mp.setdefault(c, set()).add(word)
        s = set(words)
        ans = 0
        for word in words:
            comp = set().union(*(mp[c] for c in word))
            ans = max(ans, len(word) * max((len(x) for x in s - comp), default=0))
        return ans