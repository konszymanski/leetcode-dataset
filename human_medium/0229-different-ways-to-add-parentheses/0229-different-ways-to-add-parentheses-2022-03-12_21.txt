class Solution:
    def diffWaysToCompute(self, expression: str) -> List[int]:
        
        memo = defaultdict(list)
        
        ops = {
            \'-\': lambda a, b: a - b,
            \'+\': lambda a, b: a + b,
            \'*\': lambda a, b: a * b
        }
        
        def dfs(exp):
            
            # this expression is already done
            if exp in memo:
                return memo[exp]
            
            # leaf condition: no operator
            if exp.isnumeric():
                memo[exp].append(int(exp))
                return memo[exp]
                            
            # has operator
            for i, c in enumerate(exp):

                if c not in ops:
                    continue

                op = ops[c]
                left, right = exp[:i], exp[i+1:]

                # combine all possible results
                for l in dfs(left):
                    for r in dfs(right):
                        memo[exp].append(op(l, r))

            return memo[exp]
                        
        dfs(expression)
                                        
        return memo[expression]