calc_func = {
    \'+\': lambda x, y: x + y,
    \'-\': lambda x, y: x - y,
    \'*\': lambda x, y: x * y
}

class Solution:
    def diffWaysToCompute(self, expression: str) -> List[int]:
        exp = []  # we can parse expression into signs and numbers 
        i = j = 0
        while i < len(expression):
            while j < len(expression) and expression[j].isdigit():
                j += 1
            exp.append(int(expression[i:j]))
            if j < len(expression):
                exp.append(expression[j])
            j += 1
            i = j
        # left and right alway pointer to numbers of exp
        @cache
        def dfs(left: int, right: int) -> list:
            if left == right:
                return [exp[left]]
            if right - left == 2:
                return [calc_func[exp[left+1]](exp[left], exp[right])]
            res = []
            for i in range(left, right, 2):
                op = exp[i+1]
                left_parts = dfs(left, i)
                right_parts = dfs(i+2, right)
                for x in left_parts:
                    for y in right_parts:
                        res.append(calc_func[op](x, y))
            return res
        
        return dfs(0, len(exp)-1)