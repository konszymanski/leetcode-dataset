class Solution:
    def diffWaysToCompute(self, expression: str) -> List[int]:
        memo = dict()
        return self.computeWithMemo(expression, memo)
        
    def computeWithMemo(self, expression, memo):
        if (expression in memo):
            return memo[expression]
        
        res = []
        # for each operator in the expression, split formula to two sides
        for i in range(len(expression)):
            c = expression[i]
            if (c == \'-\' or c == \'*\' or c == \'+\'):
                left = self.computeWithMemo(expression[0:i], memo)
                right = self.computeWithMemo(expression[i+1:], memo)
            
                # add all combinations from the two sides
                for a in left:
                    for b in right:
                        if (c == \'+\'):
                            res.append(a+b)
                        elif (c == \'-\'):
                            res.append(a-b)
                        elif (c == \'*\'):
                            res.append(a*b)
        # edge case: stop when there\'s no operator in the expression
        if (len(res) == 0):
            res.append(int(expression))
        
        memo[expression] = res
        return res