class Solution:
    def fourSumCount(self, A: List[int], B: List[int], C: List[int], D: List[int]) -> int:
        dic1 = self.helper(A, B)
        dic2 = self.helper(C, D)
        res = 0
        for num in dic1:
            target = 0 - num
            if target in dic2:
                res += dic1[num] * dic2[target]
        return res
    
    def helper(self, A, B):
        dic = collections.defaultdict(int)
        for a in A:
            for b in B:
                dic[a+b] += 1
        return dic