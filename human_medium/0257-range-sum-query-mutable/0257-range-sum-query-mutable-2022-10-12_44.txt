class TreeNode(object):
    def __init__(self, val = 0):
        self.val = val
        self.left = None
        self.right = None

class NumArray(object):
    def __init__(self, nums):
        self.nums = nums
        self.seg = TreeNode()
        self.build(0, len(self.nums) - 1, self.seg)

    def build(self, left, right, cur):
        if left > right: return None
        if left == right:
            cur.val = self.nums[left]
        else:
            mid = left + (right - left) // 2
            cur.left = TreeNode()
            cur.right = TreeNode()
            cur.val = self.build(left, mid, cur.left) + self.build(mid + 1, right, cur.right)
        return cur.val

    def update(self, index, val):
        dist = val - self.nums[index]
        self.nums[index] = val
        self.update_helper(index, 0, len(self.nums) - 1, self.seg, dist)

    def update_helper(self, index, left, right, cur, dist):
        cur.val += dist
        if left == right: return
        mid = left + (right - left) // 2
        if left <= index <= mid: self.update_helper(index, left, mid, cur.left, dist)
        else: self.update_helper(index, mid + 1, right, cur.right, dist)

    def sumRange(self, left, right):
        return self.range_sum_helper(0, len(self.nums) - 1, left, right, self.seg)

    def range_sum_helper(self, left, right, start, end, cur):
        mid = left + (right - left) // 2
        if start > right or end < left: return 0
        elif left >= start and right <= end:
            return cur.val
        else:
            return self.range_sum_helper(left, mid, start, end, cur.left) + self.range_sum_helper(mid + 1, right, start, end, cur.right)