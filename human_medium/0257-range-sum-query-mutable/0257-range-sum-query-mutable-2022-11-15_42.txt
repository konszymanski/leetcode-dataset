class NumArray:

    def __init__(self, nums: List[int]):

        from collections import defaultdict
        self.myrange = defaultdict(lambda : 0)
        self.len_nums = len(nums)

        def recursive(l,r):
            if l == r:
                self.myrange[(l,r)] = nums[l]
                return nums[l]
            
            mid = int((l + r)/2)

            left_sum = recursive(l, mid)
            right_sum = recursive(mid + 1, r)
            self.myrange[(l,r)] = left_sum + right_sum
            return left_sum + right_sum
        
        recursive(0,self.len_nums - 1)

        

    def update(self, index: int, val: int) -> None:
        self.val = val
        self.index = index
        def recursive(l,r):
            
            self.myrange[(l,r)] -= self.myrange[(self.index,self.index)]
            self.myrange[(l,r)] += self.val
            
            if l == r:
                return

            mid = int((l + r)/2)

            if self.index <= mid:
                recursive(l,mid)
            else:
                recursive(mid+1,r)

        
        recursive(0,self.len_nums - 1)

        

    def sumRange(self, left: int, right: int) -> int:
        
        self.left = left
        self.right = right
        self.total = 0
        def recursive(l,r):
            
            # #zero overlap
            # if l < self.left and r > self.right:
            #     return
            
            #completely overlap, add it to the total and return so that you do not double count
            if l >= self.left and r <= self.right:
                self.total += self.myrange[(l,r)]
                return
            
            if l == r:
                return

            #partial overlap conditions, continue recursion
            mid = int((l + r)/2)
            if mid<self.left:
                pass
            else:
                recursive(l,mid)
            
            if mid + 1 > self.right:
                pass
            else:
                recursive(mid+1,r)                
        
        recursive(0,self.len_nums-1)
        return self.total
        


# Your NumArray object will be instantiated and called as such:
# obj = NumArray(nums)
# obj.update(index,val)
# param_2 = obj.sumRange(left,right)