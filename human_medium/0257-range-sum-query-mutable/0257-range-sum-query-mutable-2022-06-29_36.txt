class SegmentTreeNode:
    def __init__(self, start=0, end=0, val=0, left=None, right=None):
        self.start = start
        self.end = end
        self.val = val
        self.left = left
        self.right = right

class NumArray:

    def __init__(self, nums: List[int]):
        def build(nums, start, end):
            if start == end:
                node = SegmentTreeNode(start, end, nums[start])
                return node
            node = SegmentTreeNode(start, end)
            mid = (start + end) // 2
            node.left = build(nums, start, mid)
            node.right = build(nums, mid + 1, end)
            node.val = node.left.val + node.right.val
            return node
        self.root = build(nums, 0, len(nums) - 1)
        

    def update(self, index: int, val: int) -> None:
        def updateIdx(root, index, val):
            if root.start == root.end and root.start == index:
                root.val = val
                return 
            mid = (root.start + root.end) // 2
            if index <= mid:
                updateIdx(root.left, index, val)
            else:
                updateIdx(root.right, index, val)
            root.val = root.left.val + root.right.val
        updateIdx(self.root, index, val)

    def sumRange(self, left: int, right: int) -> int:
        def sumR(root, left, right):
            if root.start == left and root.end == right:
                return root.val
            mid = (root.start + root.end) // 2
            if right <= mid:
                return sumR(root.left, left, right)
            elif left > mid:
                return sumR(root.right, left, right)
            else:
                return sumR(root.left, left, mid) + sumR(root.right, mid + 1, right)
        return sumR(self.root, left, right)