from collections import Counter

class Solution(object):
    def longestSubstring(self, s, k):

        if k<=1:
            return len(s)
        
        return self.longest(s,k)
        
    
    def longest(self,s,k):
        
        if k<=1:
            return len(s)
        
        counter=Counter(s)
        
        bad_set=set()
        
        for key in counter.keys():
            
            if counter[key]<k:
                bad_set.add(key)
                
        if len(bad_set)==0:
            return len(s)
        
        max_len=0
        start=0
        
        for i in range(len(s)):
            
            if s[i] in bad_set:
                
                if start<i:
                    temp_len=self.longest(s[start:i],k)
                    max_len=max(max_len,temp_len)
                    
                start=i+1
                
            elif i==(len(s)-1):
                
                temp_len=self.longest(s[start:],k)
                max_len=max(max_len,temp_len)
        
        return max_len