class Solution:
    def longestSubstring(self, s: str, k: int) -> int:
        max_unique = len(collections.Counter(s))
        maxSubstring = 0
        
        for i in range(1,max_unique+1):
            counter = collections.Counter()
            left = 0
            for right in range(len(s)):
                while len(counter) > i:
                    counter[s[left]] -= 1
                    if not counter[s[left]]:
                        del counter[s[left]]
                    left+=1
                counter[s[right]]+=1
                if min(counter.values()) >= k:
                    maxSubstring = max(maxSubstring,right-left+1)
        return maxSubstring