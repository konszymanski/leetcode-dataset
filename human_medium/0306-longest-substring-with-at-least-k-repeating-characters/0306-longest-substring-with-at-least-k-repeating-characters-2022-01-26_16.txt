class Solution:
    def rec(self, s, k):
        c = Counter(s)

        if pattern := "|".join(filter(lambda x: c[x] < k, c)):
            if arr := list(filter(lambda x: len(x) >= k, re.split(pattern, s))):
            
                return max(map(lambda x: self.rec(x, k), arr))
            
            return 0
        
        return len(s)
    
    def longestSubstring(self, s: str, k: int) -> int:
        return self.rec(s, k)