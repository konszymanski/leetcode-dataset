class Solution:
    def longestSubstring(self, s: str, k: int) -> int:
        ans=0
        def dfs(tmp):
            nonlocal ans
            for x in tmp:
                if x:
                    ct=Counter(x)
                    if ct.most_common()[-1][-1]>=k:#Case like \'ababab or aaabbb\' Means all the characters in the curr string are greater or equal to k
                        ans=max(ans,len(x))
                    else:#case like \'aaabb or ababa\' so again do the splitting
                        t=x[::]
                        for key,v in ct.items():
                            if v<k:
                                t=t.replace(key,\'_\')
                        dfs(t.split(\'_\'))
        dfs([s])
        return ans