class NestedIterator(object):

    def __init__(self, nestedList):
        """
        Initialize your data structure here.
        :type nestedList: List[NestedInteger]
        """
        self.list = nestedList      # top-level list to iterate
        self.index = -1             # current index into the top-level list
        self.nestedIterator = None  # if top-level list contains nested list, delegate work to a NestedIterator over that sub-list
        self.__advance()            # advance pointer to first valid element (note we initialized index with -1 above)
        

    def next(self):
        """
        :rtype: int
        """
        if self.nestedIterator is not None:
            # current index is a sub-list, delegate work to nested iterator
            val = self.nestedIterator.next()
            if not self.nestedIterator.hasNext():
                self.__advance()
        else:
            val = self.list[self.index].getInteger()
            self.__advance()
        return val


    def hasNext(self):
        """
        :rtype: bool
        """
        if self.nestedIterator is not None and self.nestedIterator.hasNext():
            return True
        
        # check remaining items in list (necessary since there may be just empty lists)
        for i in range(self.index, len(self.list)):
            if self.list[i].isInteger() or (i != self.index and NestedIterator(self.list[i].getList()).hasNext()):
                return True
        
        return False

    
    def __advance(self):
        """Advances pointer to the next element"""
        if self.nestedIterator is not None:
            self.nestedIterator.__advance()
        
        if self.nestedIterator is None or not self.nestedIterator.hasNext():
            # the current element is an integer, or the current nested list is exhausted:
            # advance to next integer value or non-empty nested list
            while self.index < len(self.list):
                self.nestedIterator = None
                self.index += 1

                if self.index < len(self.list):
                    ni = self.list[self.index]
                    if not ni.isInteger():
                        self.nestedIterator = NestedIterator(ni.getList())
                        if self.nestedIterator.hasNext():
                            # found non-empty nested list
                            break
                    else:
                        # found integer value
                        break