class Solution:
    # First few ugly numbers
    ugly = [1, 2, 3, 4, 5, 6, 8, 9, 10] 
    def nthUglyNumber(self, n: int) -> int:
        ugly = self.ugly
        if n < len(ugly):
            return ugly[n-1]

        for i in range(len(ugly), n):
            # The next ugly number must be
            # 2 * {one of alrealy known ugly number}, or
            # 3 * {one of already known ugly numebr}, or
            # 5 * {one of already known ugly number}.
            # Let\'s pick the smallest of these three candidates
            biggest = ugly[-1]  # biggest know ugly
            mul2 = 2 * ugly[bisect_right(ugly, biggest//2)]
            mul3 = 3 * ugly[bisect_right(ugly, biggest//3)]
            mul5 = 5 * ugly[bisect_right(ugly, biggest//5)]
            ugly.append(min(mul2, mul3, mul5))
            
        return ugly[n-1]