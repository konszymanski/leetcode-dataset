class NumMatrix:

    def __init__(self, matrix: List[List[int]]):
        self.matrix = matrix
        self.m = len(matrix)
        self.n = len(matrix[0])
        self.row_sum = self.calculate_row_sum()
        
    def calculate_row_sum(self) -> List[List[int]]:
		# generate an empty matrix
        row_sum = [[0 for _ in range(self.n)] for _ in range(self.m)]
        for i in range(self.m):
            # accumulate will generate a prefix sum list such that
			# if row is [1, 1, 1, 1] the return value from accumulate
            # would be [1, 2, 3, 4]
            row_sum[i] = list(accumulate(self.matrix[i]))
        
        return row_sum   
        
    def sumRegion(self, row1: int, col1: int, row2: int, col2: int) -> int:
        row_diff = 0
        
        for row in range(row1, row2+1):
            # sum all the differences for the rows in the area
            row_diff += self.row_sum[row][col2]
        
            # if there are some elements just before the matrix, subtract the sum of those values
            if col1 > 0: row_diff -= self.row_sum[row][col1-1]
            
			# 2nd way: you could also sum up all differences first then subtract the preceding part as following
			# row_diff = sum([self.row_sum[row][col2] for row in range(row1, row2+1)])
			# if col1 > 0: row_diff -= sum([self.row_sum[row][col1-1] for row in range(row1, row2+1)])
            
        return row_diff