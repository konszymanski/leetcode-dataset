# minimum height tree = center of undirected graph,if its tree

from collections import defaultdict

class Solution:
    def __init__(self):
        self.adjacency_list = defaultdict(list)

    def findMinHeightTrees(self, n: int, edges: List[List[int]]) -> List[int]:
        if n == 1:
            return [0]
        
        ingress_count = [0]*n
    
        #creare adjacency and ingress count
        for edge_to, edge_from in edges:
            self.adjacency_list[edge_to].append(edge_from)
            self.adjacency_list[edge_from].append(edge_to)
            ingress_count[edge_from] += 1
            ingress_count[edge_to] += 1
        
        
        #find leaves , ingress_count == 1
        leaves = [node for node in range(n) if ingress_count[node] < 2]
        count_of_nodes_visited = 0
        
        #do onion peel and remove the leaves on by one
        # by decreasing the ingress count
        # but 
        while count_of_nodes_visited < n - 2:   
            new_leaves = []
            for leave in leaves:
                #lets add the next layer to queue to process later
                # and simulate removing the leave layer too
                for kid in self.adjacency_list[leave]:
                    ingress_count[kid] -= 1 
                    if ingress_count[kid] == 1:
                        new_leaves.append(kid)
                #set leaves = 0
                ingress_count[leave] = 0
                leaves = new_leaves
                count_of_nodes_visited += 1
                # print(leaves, count_of_nodes_visited)

        return leaves