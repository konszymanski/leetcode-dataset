from collections import defaultdict
class Solution:
    def findMinHeightTrees(self, n: int, edges: List[List[int]]) -> List[int]:
        
        # start with leaves in the q
        # Remove edges for each leaf - if new leaves form through this process add
        # Repeat this until all the nodes are visited once.
        # return whatever is left in the q
        
        if n == 1 or n==2:
            return [i for i in range(n)]
        
        adjList = defaultdict(list)
        for e1,e2 in edges:
            adjList[e1].append(e2)
            adjList[e2].append(e1)
          
        visited = [0]*n
        q = deque()
        for i in range(n):
            if len(adjList[i]) == 1: # leaves
                visited[i] = 1
                q.append(i)
          
        level = 0
        while sum(visited) != n:
            qlen = len(q) # Critical to go level by level
            for i in range(qlen): # Critical to go level by level
                leaf = q.popleft()
                leafNei = adjList[leaf].pop() # only 1 neighbor for leaf
                adjList[leafNei].remove(leaf)
                if len(adjList[leafNei]) == 1:
                    q.append(leafNei)
                    visited[leafNei] = 1
            level += 1
                    
                
        return list(q)