"""
1 2 3 4 5 -> result [3]
1 2 3 4 5 6 -> result [3, 4] 
Our answer will not exceed two vertices
"""
class Solution:
    def findMinHeightTrees(self, n: int, edges: List[List[int]]) -> List[int]:
        g = collections.defaultdict(list) # graph
        indegree = collections.defaultdict(int) # count of edges for every vertice
        
        for edge in edges:
            g[edge[0]].append(edge[1])
            g[edge[1]].append(edge[0])
            
            indegree[edge[0]] += 1
            indegree[edge[1]] += 1
        
        q = collections.deque()
        
        for key in indegree:
            if indegree[key] == 1:
                q.append(key) # find leaf vertice
                
        res = [0] # if there is only one vertice (q will be empty)
        
        #we will clean up the planned leaf vertices
        while q:
            res = []
            for i in range(len(q)):
                cur = q.popleft()
                res.append(cur)
                
                for nghb in g[cur]:
                    indegree[nghb] -= 1
                    if indegree[nghb] == 1:
                        q.append(nghb)
        
        return res