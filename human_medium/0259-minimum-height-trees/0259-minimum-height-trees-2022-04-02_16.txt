class Solution:
    def findMinHeightTrees(self, n: int, edges: List[List[int]]) -> List[int]:
        # ==== Start from leaves, cut leaves untile nothing lefe. Return the latest cutted leaves (think this question as graph BFS, but start from leaves and search toward center) ====
        
        if n == 1:
            return [0]
        
        adj = defaultdict(list)   # key is node, val is neighbor set
        for start, end in edges:
            adj[start].append(end)
            adj[end].append(start)
        
        leaves = [key for key, val in adj.items() if len(val) == 1]
        new_leaves = leaves # if only have two nodes, this can by return
        while n > 2:
            n -= len(leaves)    # n is the number of nodes left (after cut leaves)
            # remove a layer of leaves
            new_leaves = []
            for leaf in leaves:
                new_leaf = adj[leaf][0]     # get new leaf
                adj[new_leaf].remove(leaf)  # remove old leaf from new leaf adjacent list
                if len(adj[new_leaf]) == 1:
                    new_leaves.append(new_leaf)
            leaves = new_leaves
        
        return new_leaves