class Solution:
    def findMinHeightTrees(self, total_node: int, edges: List[List[int]]) -> List[int]:
        graph = defaultdict(list)
        for u,v in edges:
            graph[u].append(v)
            graph[v].append(u)
        queue = deque()
        degree = {}    
        for node, val in graph.items():
            if len(val) == 1:
                queue.append(node)
            else:
                degree[node] = len(val)

        def bfs(total_node, graph,queue):
            while total_node>2:
                total_node -= len(queue)
                for i in range(len(queue)):
                    v = queue.popleft()
                    for child in graph[v]:
                        if child in degree:
                            degree[child]-=1
                            if degree[child] == 1:
                                queue.append(child)


            return [queue.popleft() for i in range(len(queue))] if len(queue) else [i for i in range(total_node)]
        return bfs(total_node, graph, queue)