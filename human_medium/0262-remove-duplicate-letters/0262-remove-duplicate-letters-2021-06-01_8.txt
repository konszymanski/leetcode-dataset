import string
class Solution:
    def smallestSubsequence(self, s: str) -> str:
        lastSeenAtIndex, visited =dict.fromkeys(string.ascii_lowercase,0), dict.fromkeys(string.ascii_lowercase,False)
        stack, res =[], ""
        for i in range(len(s)):
            lastSeenAtIndex[s[i]]=i
        for i in range(len(s)):
            if visited[s[i]]:
                continue
            while len(stack) and stack[-1] > s[i] and  i < lastSeenAtIndex[stack[-1]]:
                visited[stack.pop()]=False
            stack.append(s[i])
            visited[s[i]]=True
        while len(stack):
            res = "".join(stack.pop()) + res
        return res