import collections
class Solution(object):
    def removeDuplicateLetters(self, s):
        """
        :type s: str
        :rtype: str
        """
        res = ""
        while s:
            counts = collections.Counter(list(s))
            pos = 0
            for i , x in enumerate(s):
                if x < s[pos]: pos = i
                counts[x] -= 1
                if counts[x] == 0: break              # If some char is the last one, we need to stop here and include it.
            res += s[pos]
            s = s[pos+1:].replace(s[pos], "")
        return res