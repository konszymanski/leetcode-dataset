class Solution:
    def lowestCommonAncestor(self, root: \'TreeNode\', p: \'TreeNode\', q: \'TreeNode\') -> \'TreeNode\':
        
        def helper(root,find_v,seq_arr):
            if not root:
                return False
            
            seq_arr.append(root)
            
            if root.val==find_v.val:
                return True
          
            findL=helper(root.left,find_v,seq_arr)
            
            findR=helper(root.right,find_v,seq_arr)
            
            if findL or findR:
                return True
            
            seq_arr.pop()
            return False
        
        seq_arr=[]
        helper(root,p,seq_arr)
        p_path=seq_arr
        seq_arr=[]
        helper(root,q,seq_arr)
        q_path=seq_arr
        
        
        
        while p_path and q_path:
            if p_path[-1].val==q_path[-1].val:
                return p_path[-1]
            else:
                if len(p_path)>len(q_path):
                    p_path.pop()
                else:
                    q_path.pop()