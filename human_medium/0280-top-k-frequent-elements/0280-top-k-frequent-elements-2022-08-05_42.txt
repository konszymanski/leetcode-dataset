class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        # make a histogram of the data
        hashmap = dict()        
        for num in nums:
            hashmap[str(num)] = 1 + hashmap.get(str(num), 0)
            
        # prepare a bucket of equal to the length of the original data
        # we use len(nums)+1 because we have the freq of the data already 
        # ranging from 1 - len(nums). bucket[0] will be unused but still alloted.
        bucket = [[] for _ in range(len(nums)+1)]
        
        # starting inserting the data according to freq in bucket[freq]
        for num, freq in hashmap.items():
            bucket[freq].append(num)
        
        # # now we will flatten and reverse the list of list into a single list.
        # # this new list will be decreasing order of frequency.
        # flat = [item for sublist in bucket for item in sublist][::-1]
        # # now return top k elements
        # return flat[:k]
        
        # a more efficent alternative to above code is that we start building the flat list 
        # without the quick-list builder while checking the length of the list 
        # after adding each freq item till we reach len(flat) = k
        flat = []
        for sublist in range(len(bucket)-1, 0, -1):
            for items in bucket[sublist]:
                flat.append(items)
            if len(flat) == k:
                return flat