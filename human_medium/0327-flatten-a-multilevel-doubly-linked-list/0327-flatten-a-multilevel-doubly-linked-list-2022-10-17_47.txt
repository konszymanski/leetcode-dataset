class Solution(object):
    def flatten(self, head):
        if not(head): return head
        def rec(values, head):
            while head:
                values.append(head.val)
                if head.child is not None:
                    rec(values, head.child)
                head = head.next
                
        values = []
        rec(values, head)
        head = tail = Node(values[0])
        for i in range(1, len(values)):
            newNode = Node(values[i])
            tail.next = newNode
            newNode.prev = tail
            tail = tail.next
        return head