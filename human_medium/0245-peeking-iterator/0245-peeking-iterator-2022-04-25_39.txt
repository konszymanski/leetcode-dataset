from typing import Union

# it indicates that we do not know if there is a next 
# item in iterator
NOT_SURE = object()

class PeekingIterator:
    def __init__(self, iterator: Iterator):
        """
        Initialize your data structure here.
        :type iterator: Iterator
        """
        self._itr = iterator

        # we may have to hold some item, so that another call
        # to peek() returns the same value
        self._held_item: Union[int, object] = NOT_SURE

    def peek(self) -> int:
        """
        Returns the next element in the iteration without advancing the iterator.
        :rtype: int
        """
        if not self._holding_item:
            self._hold_the_item()

        return self._held_item

    def next(self) -> int:
        """
        :rtype: int
        """
        if self._holding_item:
            output = self._release_item_from_hold()
        else:
            output = self._itr.next()

        return output

    def hasNext(self) -> bool:
        """
        :rtype: bool
        """
        return self._holding_item or self._itr.hasNext()

    def _hold_the_item(self) -> None:
        """
        given that there is some item in itertor, holding it to self._held_item
        :return: 
        """
        self._held_item = self._itr.next()

    def _release_item_from_hold(self) -> int:
        """
        given that we are holding some item, returning that item
        and setting self._held_item to NOT_SURE
        :return:
        """
        output = self._held_item

        self._held_item = NOT_SURE

        return output

    @property
    def _holding_item(self) -> bool:
        """
        :return: True if self._held_item is set to some number which has
                      not been returned by self.next()
        """
        return self._held_item is not NOT_SURE