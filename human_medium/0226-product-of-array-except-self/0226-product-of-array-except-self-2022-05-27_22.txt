class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
#         # 1. space = O(2n) = O(n) and time = O(n)
#         prefixes = [1]*len(nums)
#         postfixes = [1]*len(nums)
#         #calculate prefix product array - each index will have total product of all elements BEFORE it
#         prefix = 1
#         for i in range(1,len(nums)):
#             prefix *= nums[i-1]
#             prefixes[i] = prefix
#         #calculate postfix product array - each index will have total product of all elements AFTER it
#         postfix = 1
#         for i in range(len(nums)-2, -1,-1):
#             postfix *= nums[i+1]
#             postfixes[i] = postfix
#         final = []
#         for i,j in zip(prefixes,postfixes):
#             final.append(i*j)
#         return final
        
        # 2. space = O(1) and time = O(n)
        final = [1]*len(nums)
        #Do the prefix product calculation
        product = 1
        for i in range(1, len(nums)):
            product *= nums[i-1]
            final[i] *= product
        #Do the postfix product calculation
        product = 1
        for i in range(len(nums)-2, -1,-1):
            product *= nums[i+1]
            final[i] *= product
        return final