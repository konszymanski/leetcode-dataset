class Solution:
    def productExceptSelf(self, nums: list[int]) -> list[int]:
        return list(
            map(
                mul,
                chain((1,), accumulate(islice(nums, len(nums) - 1), mul)),
                chain(
                    reversed(
                        tuple(accumulate(islice(reversed(nums), len(nums) - 1), mul))
                    ),
                    (1,),
                ),
            )
        )