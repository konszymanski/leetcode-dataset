from collections import defaultdict
class Solution:
    def calcEquation(self, equations: List[List[str]], values: List[float], queries: List[List[str]]) -> List[float]:

        graph = defaultdict(dict)

        for (v1, v2), value in zip(equations, values):
            graph[v1][v2] = value
            graph[v2][v1] = 1/value
        

        def dfs(src, dst, seen):

            if src in seen:
                return -1
            
            seen.add(src)
            
            for neb in graph[src]:
                if neb == dst:
                    return graph[src][dst]
                else:
                    tmp = dfs(neb,dst, seen)
                    if tmp == -1:
                        continue
                    return tmp*graph[src][neb]
            return -1
        
        ans = []
        for a,b in queries:
            ans.append(dfs(a,b,set()))
        
        return ans