class Node:
    def __init__(self, key, val):
        self.key, self.val = key, val

class Solution:
    def calcEquation(self, equations: List[List[str]], values: List[float], queries: List[List[str]]) -> List[float]:
        # build graph
        graph = defaultdict(list)
        self.build_graph(graph, equations, values)
        
        result = []
        for query in queries:
            numerator, denominator = query[0], query[1]
            if numerator not in graph or denominator not in graph:
                result.append(float(\'-1\'))
            else:
                ans = self.dfs(graph, set(), numerator, denominator)
                result.append(ans)

        return result

    def dfs(self, graph, visited, src, dest):
        if src == dest: return 1.0
        visited.add(src)

        for node in graph[src]:
            if node.key not in visited:
                ans = self.dfs(graph, visited, node.key, dest)
                if ans != -1.0:
                    return ans * node.val
        
        return -1.0

    def build_graph(self, graph, equations, values):
        for i, equation in enumerate(equations):
            numerator, denominator = equation[0], equation[1]
            graph[numerator].append(Node(denominator, values[i])) 
            graph[denominator].append(Node(numerator, 1/values[i]))