class Solution(object):
    def calcEquation(self, equations, values, queries):
        """
        :type equations: List[List[str]]
        :type values: List[float]
        :type queries: List[List[str]]
        :rtype: List[float]
        """
        if values == None or len(values) == 0:
            return -1

        if len(values) != len(equations):
            return -1
        
        if len(values) == 0:
            return -1
        
        results = []
        adjlist = {}
        for e,v in zip(equations, values):
            if e[0] not in adjlist:
                adjlist[e[0]] = []
            adjlist[e[0]].append((e[1],v))
            
            if e[1] not in adjlist:
                adjlist[e[1]] = []
            adjlist[e[1]].append((e[0],1.0/v))
            
        
        for q in queries:
            if q[0] not in adjlist or q[1] not in adjlist:
                results.append(-1)
                continue
            
            start = q[0]
            end = q[1]
            seen = set()
            
            result = self.dfs(start, end, adjlist, seen)
            results.append(result if result else -1)
        
        return results
            
    def dfs(self, q, target, adjlist, seen):
        # boundary condition
        if q == target:
            return 1.0
        
        # for each child, perform dfs to find target and mark seen nodes as seen
        if q not in seen:
            seen.add(q)
            for child in adjlist[q]:
                result = self.dfs(child[0], target, adjlist, seen)
                if result:
                    return child[1] * result
        
        return None