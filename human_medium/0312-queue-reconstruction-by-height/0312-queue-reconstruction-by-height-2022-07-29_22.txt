from sortedcontainers import SortedList
# SortedList is a data structure based on the Binary Indexed Tree.

class Solution:

    def reconstructQueue(self, people: List[List[int]]) -> List[List[int]]:
	
        people.sort(key = lambda x: [x[0], -x[1]])
		# First, the array is sorted to be in order such that shortest persons comes first,
		# and when two people have same height, which one has more people in front comes first.
		# Time complexity: O(nlogn)
		
        indices = SortedList(range(len(people))) 
		# indices is a Binary Indexed Tree which we will use to reach the available index and remove it.
		
        output = [None] * len(people)
		# output is an array where we will include every person according to the required queue.
		
        for height, num in people:
            i = indices[num]
			# We take available index from indices.
			
            indices.remove(i)
			# Then we remove that index from SortedList since it is not available anymore.
			
			# Both looking value at a specific index and removing value in SortedList takes O(logn) time.
			
            output[i] = [height, num]
			# Here, we add the person to his appropriate place in queue.
			
        return output
		
		# Overall Time Complexity: O(nlogn), Space Complexity: O(n)