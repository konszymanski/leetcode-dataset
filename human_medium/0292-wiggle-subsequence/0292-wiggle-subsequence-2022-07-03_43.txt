python
class Solution:
    def wiggleMaxLength(self, nums: List[int]) -> int:
        res = 1
        Flag = 0 # store big trend. start with 0, can only be switched to -1 or +1
        currFlag = 0 # store local trend. can be 0, -1, +1

        for i in range(1,len(nums)):
            if   nums[i-1] <  nums[i]: 
                currFlag = 1
            elif nums[i-1] >  nums[i]: 
                currFlag = -1            
            elif nums[i-1] == nums[i]: 
                currFlag = 0
            
            if currFlag != 0:
                res += (currFlag != Flag) #when Flag changes, res ++
                Flag = currFlag
            
            #print(i,Flag,res)
        return res