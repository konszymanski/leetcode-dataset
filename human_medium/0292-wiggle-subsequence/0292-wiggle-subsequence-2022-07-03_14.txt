class Solution:
    def wiggleMaxLength(self, nums: List[int]) -> int:
        n = len(nums)
        
        prev = nums[0]
        direction = "none"
        ans = 1
        
        
        for val in nums[1:]:
            if val == prev: continue
            
            if direction == "none":
                if val < prev:
                    direction = "down"
                else:
                    direction = "up"
                    
                prev = val
                ans += 1
                continue
            
            if direction == "down":
                if val > prev:
                    ans += 1
                    prev = val
                    direction = "up"
                    
                else:
                    # take minimum to optimize the direction swaps
                    prev = min(prev, val)
                    
            elif direction == "up":
                if val < prev:
                    ans += 1
                    prev = val
                    direction = "down"
                    
                else:
                    # take maximum to optimize the direction swaps
                    prev = max(prev, val)
        
        return ans