from collections import Counter

class Solution:
    def findAnagrams(self, s: str, p: str) -> List[int]:
        # We\'ll use a sliding window accross s, comparing the counts of the window to the 
		# counts of p. If the counts are equal, then the window is an anagram of p.
        
        # Map from char to the count of the char in p.
        # E.G., "cba": {\'c\': 1, "b": 1, "a": 1}
        p_counts = Counter(p)
        
        # Initial window bounds, we start at len(p)-1 rather than len(p) because we add to the window counts
        # map at the beginning of the following while loop.
        l, r = 0, len(p)-1
        
        # Char counter for the sliding window.
        window_counts = Counter(s[l:r])
        
        ans = []
        while r < len(s):
		   # It\'s been helpful for me to remember this trick for sliding windows:
		   # Usually, you can increment the counter at the beginning of the loop,
		   # then at the end of the loop slide the window.
            window_counts[s[r]] += 1
			
			# We\'ve found a match, append the start index to the answer
            if window_counts == p_counts: 
                ans.append(l)
                
			# Before we slide the window, decrement and if applicable delete the counter 
			# entry at the left side (this char is exiting the window)
            window_counts[s[l]] -= 1 
            if window_counts[s[l]] == 0:
                del window_counts[s[l]]
            
			# Slide the window, we\'ll handle adding the new right char to the counter at the 
			# start of the next loop.
            r += 1
            l += 1
            
        return ans