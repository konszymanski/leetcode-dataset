class Solution:
    def countLetters(self, s: str) -> dict:
        counts = {}
        for char in s:
            try:
                counts[char] += 1
            except KeyError:
                counts[char] = 1
        return counts
    
    def isAnagram(self, sCounts: str, tCounts: str) -> bool:
        for char in sCounts:
            currentCount = sCounts[char]
            try:
                if tCounts[char] != currentCount:
                    return False
            except KeyError:
                if currentCount != 0:
                    return False
        return True
    
    def findAnagrams(self, s: str, p: str) -> List[int]:
        anagramLength = len(p) 
        checkStrLength = len(s) 
        pCounts = self.countLetters(p)
        anagrams = []
        sCounts = None
        for i in range(checkStrLength - anagramLength + 1): 
            if not sCounts:
                sCounts = self.countLetters(s[i:i + anagramLength])
            else:
                sCounts[s[i - 1]] -= 1
                try:
                    sCounts[s[i + anagramLength - 1]] += 1
                except KeyError:
                    sCounts[s[i + anagramLength - 1]] = 1
            if self.isAnagram(sCounts, pCounts):
                anagrams.append(i)
        return anagrams