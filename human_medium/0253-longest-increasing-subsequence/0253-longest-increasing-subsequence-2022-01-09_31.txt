class Solution:
    def lengthOfLIS(self, nums: List[int]) -> int:
        # Use a stack to store the increasing number 
        # use a binary search to check where the new element should be and replace it
        # if the num\'s location is larger then the last index, then append
        # finally cacluate the len of stack
        # Time: O(nlogn) Space: O(n)

        
        def binary_search(nums,target):
            l = 0
            r = len(nums)
            while l < r:
                mid = l +(r-l)//2
                if nums[mid] == target:
                    return mid
                elif nums[mid] < target:
                    l = mid + 1
                else:
                    r = mid
            return l    
        
        stack = []
        for n in nums:
            i = binary_search(stack,n)
            if i == len(stack):
                stack.append(n)
            else:
                stack[i] = n
                
        return len(stack)