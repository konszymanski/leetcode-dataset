class Solution:
    def characterReplacement(self, s: str, k: int) -> int:
        counter = collections.defaultdict( int )  # use a dict to record the frequency of char in window
        sublen = 0  # the length of window
        maxfreq = 0  # max freq of char in window
        for i in range(len(s)):
            counter[s[i]] += 1
            maxfreq = max(maxfreq, counter[s[i]])
            if maxfreq + k > sublen:
                sublen += 1
            else:
                counter[s[i - sublen]] -= 1
        return sublen