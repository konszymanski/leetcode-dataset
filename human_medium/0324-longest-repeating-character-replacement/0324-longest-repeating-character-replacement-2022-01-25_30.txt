class Solution:
    def characterReplacement(self, s: str, k: int) -> int:
        # map character -> int (frequency count) within sliding window
        count = defaultdict(int)
        
        ret = 0
        
        left = 0
        maxcount = 0
        for right, char_right in enumerate(s):

            count[char_right] = 1 + count[char_right]
            
            # instead of geting this from max(count.values()) we 
            # can take a running maxcount
            maxcount = max(maxcount, count[char_right])
            
            # there are more characters in the window than we can replace
            # shrink the window
            while ((right - left) + 1) - maxcount > k:
                # shift character on left
                char_left = s[left]
                
                count[char_left] = count[char_left] - 1
                left = left + 1
            
            ret = max(ret,  (right - left) + 1)
            
        return ret