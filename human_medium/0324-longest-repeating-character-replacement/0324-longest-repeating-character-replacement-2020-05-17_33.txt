# O(n) time complexity | O(1) space complexity, which is actually O(<=26), max num of en letters 
class Solution:
    def characterReplacement(self, s: str, k: int) -> int:
        # occurence of letters
        occurence_map = {}
        left, max_length, max_repeat_count = 0, 0, 0

        # use sliding window of (right - left + 1 + k) size
        for right in range(len(s)):
            current = s[right]
            if current not in occurence_map:
                occurence_map[current] = 1
            else:
                occurence_map[current] += 1
            # will acummulate value up to window size - k to tolerate replacements 
			# we will not decrease it as it captures the first longest and we are practiacally interested in the next longest only 
            max_repeat_count = max(max_repeat_count, occurence_map[current])

            # shift left and decrease left letter couter if we cannot tolerate other letters more
            if (right - left + 1 - max_repeat_count) > k:
                left_char = s[left]
                # you can also del if 0 to decrease the space complexity further
                occurence_map[left_char] -= 1
                left += 1

            max_length = max(max_length, right - left + 1)
        return max_length