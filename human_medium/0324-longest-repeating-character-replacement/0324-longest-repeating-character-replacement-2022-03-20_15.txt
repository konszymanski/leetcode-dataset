from collections import defaultdict
class Solution:
    def characterReplacement(self, s: str, k: int) -> int:
                    
        left = 0
        res = 0

        mapp = defaultdict(int)

        for i in range(len(s)):

            cur = s[i]

            # 1, in
            mapp[cur] += 1
            
# (the length of current window)  -  (the most frequency of the symbol in the current window)
# judge whether this value is > k. if > k, it means the left pointer needs to shrink

# For example, AAABBB, k = 2 (can only change 2 times). 
# Then AAABB is OK since we have 3 A and 2 B, the most frequent symbol is A. 
# we compute as 5 - 3 = 2, not > 2, so it will not go into while loop.
# After this, when we have AAABBB, then 6 - 3 > 2. We go into the loop to update the window.
            
            while (i - left + 1) - max(mapp.values()) > k:
                
                # 2, out
                mapp[s[left]] -= 1
                
                left += 1
            
			# 3, compute
            res = max(res, i - left + 1)
        
        return res