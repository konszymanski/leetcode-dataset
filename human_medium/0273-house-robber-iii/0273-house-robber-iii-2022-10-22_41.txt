def rob(self, root: Optional[TreeNode], dp = {}) -> int:
        if root is None:
            return 0
        
        if root in dp: return dp[root]
        
        # selecting the current node
        ll, lr, rl, rr = 0,0,0,0
        if root.left:
            ll = self.rob(root.left.left, dp)
            lr = self.rob(root.left.right, dp)
        
        if root.right:
            rl = self.rob(root.right.left, dp)
            rr = self.rob(root.right.right, dp)
            
        select_val = root.val + ll+lr+rl+rr
        
        #not selecting
        not_select_val = self.rob(root.left, dp) + self.rob(root.right, dp)
        
        dp[root] = max(select_val, not_select_val)
        
        return dp[root]