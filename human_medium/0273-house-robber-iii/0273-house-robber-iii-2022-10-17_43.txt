class Solution:
    def rob(self, root: Optional[TreeNode]) -> int:
        def helper(root):
            # return rob, dont rob
            if not root:
                return 0, 0
            
            left_rob, left_no_rob = helper(root.left)
            right_rob, right_no_rob = helper(root.right)
            
            # if we choose to rob this node, we can\'t rob left or right
            rob = root.val + left_no_rob + right_no_rob
            # if we don\'t rob this node, we can take max of left and right
            no_rob = max(left_rob, left_no_rob) + max(right_rob, right_no_rob)
            return rob, no_rob
        
        return max(helper(root))