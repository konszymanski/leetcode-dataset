class Solution:
    def rob(self, root: Optional[TreeNode]) -> int:
        @lru_cache(None) # for memoizing the result of each  function call
        def recurse(rob, root):
            if not root:
                return 0
            robs, spares = -math.inf, -math.inf
            if rob:
                robs = root.val + recurse(False, root.left) + recurse(False, root.right)
            spares = recurse(True, root.left) + recurse(True, root.right)
            return max(robs, spares)
        return recurse(True, root)