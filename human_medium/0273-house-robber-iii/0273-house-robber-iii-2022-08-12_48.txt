class Solution:
    def rec(self,node):
        if node.left is None and node.right is None:
            return node.val,0
        li = le = ri = re = 0
        if node.left is not None:
            li,le = self.rec(node.left)
        if node.right is not None:
            ri,re = self.rec(node.right)
        return node.val + le + re,max(li,le) + max(ri,re)
    def rob(self, root: Optional[TreeNode]) -> int:
        if root is None:
            return 0
        return max(self.rec(root))