class Solution:
    def rob(self, root: Optional[TreeNode]) -> int:
        def dfs(node):
            if not node: return [0, 0]
            withRootLeft, withoutRootLeft = dfs(node.left)
            withRootRight, withoutRootRight = dfs(node.right)
            withRoot = node.val + withoutRootLeft + withoutRootRight
            withoutRoot = max(withRootLeft, withoutRootLeft) + max(withRootRight, withoutRootRight)
            return [withRoot, withoutRoot]
        return max(dfs(root))