class Solution:
    def pathSum(self, root: Optional[TreeNode], targetSum: int) -> int:
        if not root: return 0
        result = 0
        def dfs(root, currentSum):
            nonlocal result
            if currentSum == root.val:
                result += 1
            if root.left: dfs(root.left, currentSum - root.val)
            if root.right: dfs(root.right, currentSum - root.val)
        
        def traverse(root, currentSum):
            dfs(root, currentSum)
            if root.left: traverse(root.left, currentSum)
            if root.right: traverse(root.right, currentSum)
        traverse(root, targetSum)
        return result