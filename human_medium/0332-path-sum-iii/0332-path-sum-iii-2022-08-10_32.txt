class Solution:
    def pathSum(self, root: Optional[TreeNode], targetSum: int) -> int:
        cnt = 0
        hm = defaultdict(int)
        hm[0] += 1
        def traverse(node, currSum):
            nonlocal cnt
            if not node:
                return
            currSum += node.val
            cnt += hm[currSum - targetSum]
            hm[currSum] += 1
            traverse(node.left, currSum)
            traverse(node.right, currSum)
            hm[currSum] -= 1
        traverse(root , 0)
        return cnt