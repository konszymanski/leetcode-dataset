class Solution:
    def pathSum(self, root: Optional[TreeNode], targetSum: int) -> int:
        res_count = 0

        def dfs(node):
            nonlocal res_count
            
            if not node:
                return []
            
            curr_paths = [0]

            if node.left:
                curr_paths += dfs(node.left)
            if node.right:
                curr_paths += dfs(node.right)
                
            for i in range(len(curr_paths)):
                curr_paths[i] += node.val
                if curr_paths[i] == targetSum:
                    res_count += 1
            
            return curr_paths

        dfs(root)
        return res_count