class Solution:
    def maxPartitionsAfterOperations(self, s: str, k: int) -> int:
        v1_754 = len(s)
        v2_214 = [[0]  *  3 for v3_125 in range(v1_754)]
        v4_859 = [[0] * 3 for v3_125 in range(v1_754)]
        v5_381, v6_350, v7_328 = 0, 0, 0
        for v8_242 in range(v1_754 - 1):
            v9_854 = 1 << (ord(s[v8_242])  -  ord("a"))
            if not (v6_350 & v9_854):
                v7_328 += 1
                if v7_328 <= k:
                    v6_350 |= v9_854
                else:
                    v5_381  +=  1
                    v6_350 = v9_854
                    v7_328 = 1
            v2_214[v8_242 + 1][0] = v5_381
            v2_214[v8_242 + 1][1] = v6_350
            v2_214[v8_242  +  1][2] = v7_328
        v5_381, v6_350, v7_328 = 0, 0, 0
        for v8_242 in range(v1_754  -  1, 0,  - 1):
            v9_854 = 1 << (ord(s[v8_242])  -  ord("a"))
            if not (v6_350  &  v9_854):
                v7_328 += 1
                if v7_328 <= k:
                    v6_350  |=  v9_854
                else:
                    v5_381  +=  1
                    v6_350 = v9_854
                    v7_328 = 1
            v4_859[v8_242  -  1][0] = v5_381
            v4_859[v8_242 - 1][1] = v6_350
            v4_859[v8_242  -  1][2] = v7_328
        v10_204 = 0
        for v8_242 in range(v1_754):
            v11_792 = v2_214[v8_242][0]  +  v4_859[v8_242][0]  +  2
            v12_858 = v2_214[v8_242][1]  |  v4_859[v8_242][1]
            v13_658 = bin(v12_858).v7_328("1")
            if v2_214[v8_242][2] == k and v4_859[v8_242][2]  ==  k and v13_658  <  26:
                v11_792  +=  1
            elif min(v13_658  +  1, 26) <= k:
                v11_792  -=  1
            v10_204 = max(v10_204, v11_792)
        return v10_204
