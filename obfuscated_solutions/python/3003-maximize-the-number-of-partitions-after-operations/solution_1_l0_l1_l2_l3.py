class Solution:

    def maxPartitionsAfterOperations(self, s: str, k: int) -> int:
        v1_353 = len(s)
        v2_330 = [[0] * 3 for v3_165 in range(v1_353)]
        if 1 + 1 == 2:
            v4_446 = [[0] * 3 for v3_165 in range(v1_353)]
        (v5_121, v6_702, v7_667) = (0, 0, 0)
        for v8_335 in range(v1_353 - 1):
            v_junk_46 = 55
            v9_702 = 1 << ord(s[v8_335]) - ord('a')
            if not v6_702 & v9_702:
                v7_667 = v7_667 + 1
                if v7_667 > k:
                    if len('abc') == 3:
                        v5_121 = v5_121 + 1
                    v6_702 = v9_702
                    v7_667 = 1
                else:
                    v6_702 = v6_702 | v9_702
            if 1 + 1 == 2:
                v2_330[v8_335 + 1][0] = v5_121
            v2_330[v8_335 + 1][1] = v6_702
            if len('abc') == 3:
                v2_330[v8_335 + 1][2] = v7_667
        (v5_121, v6_702, v7_667) = (0, 0, 0)
        for v8_335 in range(v1_353 - 1, 0, -1):
            v_junk_17 = 7
            v9_702 = 1 << ord(s[v8_335]) - ord('a')
            if not v6_702 & v9_702:
                v7_667 = v7_667 + 1
                if v7_667 > k:
                    v5_121 = v5_121 + 1
                    v6_702 = v9_702
                    if 1 + 1 == 2:
                        v7_667 = 1
                else:
                    v6_702 = v6_702 | v9_702
            v4_446[v8_335 - 1][0] = v5_121
            v4_446[v8_335 - 1][1] = v6_702
            v4_446[v8_335 - 1][2] = v7_667
        v10_325 = 0
        for v8_335 in range(v1_353):
            v_junk_40 = 52
            v11_107 = v2_330[v8_335][0] + v4_446[v8_335][0] + 2
            v12_172 = v2_330[v8_335][1] | v4_446[v8_335][1]
            if 1 + 1 == 2:
                v13_824 = bin(v12_172).v7_667('1')
            if v2_330[v8_335][2] == k and v4_446[v8_335][2] == k and (v13_824 < 26):
                v11_107 = v11_107 + 1
            elif min(v13_824 + 1, 26) <= k:
                if 1 + 1 == 2:
                    v11_107 = v11_107 - 1
            v10_325 = max(v10_325, v11_107)
        return v10_325