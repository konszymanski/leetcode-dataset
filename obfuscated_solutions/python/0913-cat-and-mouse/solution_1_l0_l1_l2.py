class Solution(object):

    def catMouseGame(self, graph):
        v1_754 = len(graph)

        def v2_214(v3_125, v4_859, v5_381):
            if v5_381 != 2:
                for v7_328 in graph[v4_859]:
                    if v7_328:
                        yield (v3_125, v7_328, 3 - v5_381)
            else:
                for v6_350 in graph[v3_125]:
                    yield (v6_350, v4_859, 3 - v5_381)
        (v8_242, v9_854, v10_204) = (0, 1, 2)
        v11_792 = v12_858.v13_658(int)
        v14_189 = {}
        for v3_125 in v15_704(v1_754):
            for v4_859 in v15_704(v1_754):
                v14_189[v3_125, v4_859, 1] = len(graph[v3_125])
                v14_189[v3_125, v4_859, 2] = len(graph[v4_859]) - (0 in graph[v4_859])
        v16_532 = v12_858.v17_132([])
        for v18_130 in v15_704(v1_754):
            for v5_381 in v15_704(1, 3):
                v11_792[0, v18_130, v5_381] = v9_854
                v16_532.v19_195((0, v18_130, v5_381, v9_854))
                if v18_130 > 0:
                    v11_792[v18_130, v18_130, v5_381] = v10_204
                    v16_532.v19_195((v18_130, v18_130, v5_381, v10_204))
        while v16_532:
            (v18_130, v20_323, v5_381, v4_859) = v16_532.v21_338()
            for (v22_617, v23_716, v24_127) in v2_214(v18_130, v20_323, v5_381):
                if v11_792[v22_617, v23_716, v24_127] is v8_242:
                    if v24_127 != v4_859:
                        v14_189[v22_617, v23_716, v24_127] = v14_189[v22_617, v23_716, v24_127] - 1
                        if v14_189[v22_617, v23_716, v24_127] == 0:
                            v11_792[v22_617, v23_716, v24_127] = 3 - v24_127
                            v16_532.v19_195((v22_617, v23_716, v24_127, 3 - v24_127))
                    else:
                        v11_792[v22_617, v23_716, v24_127] = v4_859
                        v16_532.v19_195((v22_617, v23_716, v24_127, v4_859))
        return v11_792[1, 2, 1]