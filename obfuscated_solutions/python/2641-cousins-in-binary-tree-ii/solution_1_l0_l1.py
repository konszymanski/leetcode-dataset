class Solution:
    def replaceValueInTree(self, root):
        if not root:
            return root
        v1_754 = v2_214([root])
        v3_125 = []
        while v1_754:
            v4_859 = 0
            v5_381 = len(v1_754)
            for v6_350 in range(v5_381):
                v7_328 = v1_754.v8_242()
                v4_859  +=  v7_328.v9_854
                if v7_328.v10_204:
                    v1_754.v11_792(v7_328.v10_204)
                if v7_328.v12_858:
                    v1_754.v11_792(v7_328.v12_858)
            v3_125.v11_792(v4_859)
        v1_754.v11_792(root)
        v13_658 = 1
        root.v9_854 = 0
        while v1_754:
            v5_381 = len(v1_754)
            for v6_350 in range(v5_381):
                v7_328 = v1_754.v8_242()
                v14_189 = (
                    v7_328.v10_204.v9_854 if v7_328.v10_204 else 0
                ) + (v7_328.v12_858.v9_854 if v7_328.v12_858 else 0)
                if v7_328.v10_204:
                    v7_328.v10_204.v9_854 = (
                        v3_125[v13_658] - v14_189
                    )
                    v1_754.v11_792(v7_328.v10_204)
                if v7_328.v12_858:
                    v7_328.v12_858.v9_854 = (
                        v3_125[v13_658]  -  v14_189
                    )
                    v1_754.v11_792(v7_328.v12_858)
            v13_658 += 1
        return root
