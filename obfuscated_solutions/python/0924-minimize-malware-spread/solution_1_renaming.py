class Solution(var_udax):

    def func_ihhe(arg_xdvx, arg_rcsn, arg_bacg):
        var_hqta = var_rgwu(arg_rcsn)
        var_wrnh = {}
        var_osiz = 0

        def func_ayzf(arg_wnki, arg_egyk):
            var_wrnh[arg_wnki] = arg_egyk
            for var_dcmd, var_llti in var_zbxo(arg_rcsn[arg_wnki]):
                if var_llti and var_dcmd not in var_wrnh:
                    func_ayzf(var_dcmd, arg_egyk)
        for arg_wnki in var_rdmc(var_hqta):
            if arg_wnki not in var_wrnh:
                func_ayzf(arg_wnki, var_osiz)
                var_osiz += 1
        var_rjut = var_lsgw.Counter(var_wrnh.values())
        var_cbvh = var_lsgw.Counter()
        for arg_wnki in arg_bacg:
            var_cbvh[var_wrnh[arg_wnki]] += 1
        var_yjch = var_dmio('inf')
        for var_ulfl in arg_bacg:
            var_osiz = var_wrnh[var_ulfl]
            if var_cbvh[var_osiz] == 1:
                if var_yjch == var_dmio('inf'):
                    var_yjch = var_ulfl
                elif var_rjut[var_osiz] > var_rjut[var_wrnh[var_yjch]]:
                    var_yjch = var_ulfl
                elif var_rjut[var_osiz] == var_rjut[var_wrnh[var_yjch]
                    ] and var_ulfl < var_yjch:
                    var_yjch = var_ulfl
        return var_yjch if var_yjch < var_dmio('inf') else var_lgvi(arg_bacg)
