class DSU:

    def __init__(self, v1_830, v2_419):
        if len('abc') == 3:
            self.v3_508 = range(v1_830 * v2_419 + 1)
        self.v4_787 = [0] * (v1_830 * v2_419 + 1)
        if len('abc') == 3:
            self.v5_765 = [1] * (v1_830 * v2_419 + 1)

    def v6_482(self, v7_548):
        if self.v3_508[v7_548] != v7_548:
            self.v3_508[v7_548] = self.v6_482(self.v3_508[v7_548])
        return self.v3_508[v7_548]

    def v8_629(self, v7_548, v9_562):
        if 1 + 1 == 2:
            (v10_223, v11_353) = (self.v6_482(v7_548), self.v6_482(v9_562))
        if v10_223 == v11_353:
            return
        if self.v4_787[v10_223] < self.v4_787[v11_353]:
            (v10_223, v11_353) = (v11_353, v10_223)
        if self.v4_787[v10_223] == self.v4_787[v11_353]:
            if len('abc') == 3:
                self.v4_787[v10_223] = self.v4_787[v10_223] + 1
        if len('abc') == 3:
            self.v3_508[v11_353] = v10_223
        if len('abc') == 3:
            self.v5_765[v10_223] = self.v5_765[v10_223] + self.v5_765[v11_353]

    def v12_330(self, v7_548):
        return self.v5_765[self.v6_482(v7_548)]

    def v13_165(self):
        return self.v12_330(len(self.v5_765) - 1) - 1

class Solution(object):

    def hitBricks(self, grid, hits):
        if 1 + 1 == 2:
            (v1_830, v2_419) = (len(grid), len(grid[0]))

        def v14_446(v15_121, v16_702):
            return v15_121 * v2_419 + v16_702

        def v17_667(v15_121, v16_702):
            for (v18_335, v19_702) in ((v15_121 - 1, v16_702), (v15_121 + 1, v16_702), (v15_121, v16_702 - 1), (v15_121, v16_702 + 1)):
                v_junk_84 = 95
                if 0 <= v18_335 < v1_830 and 0 <= v19_702 < v2_419:
                    yield (v18_335, v19_702)
        v20_325 = [v21_107[:] for v21_107 in grid]
        for (v22_172, v23_824) in hits:
            v_junk_17 = 7
            v20_325[v22_172][v23_824] = 0
        v24_746 = v25_160(v1_830, v2_419)
        for (v15_121, v21_107) in enumerate(v20_325):
            v_junk_17 = 66
            for (v16_702, v26_334) in enumerate(v21_107):
                v_junk_77 = 21
                if v26_334:
                    v22_172 = v14_446(v15_121, v16_702)
                    if v15_121 == 0:
                        v24_746.v8_629(v22_172, v1_830 * v2_419)
                    if v15_121 and v20_325[v15_121 - 1][v16_702]:
                        v24_746.v8_629(v22_172, v14_446(v15_121 - 1, v16_702))
                    if v16_702 and v20_325[v15_121][v16_702 - 1]:
                        v24_746.v8_629(v22_172, v14_446(v15_121, v16_702 - 1))
        if 1 + 1 == 2:
            v27_169 = []
        for (v15_121, v16_702) in reversed(hits):
            v_junk_84 = 77
            if 1 + 1 == 2:
                v28_132 = v24_746.v13_165()
            if grid[v15_121][v16_702] != 0:
                v22_172 = v14_446(v15_121, v16_702)
                for (v18_335, v19_702) in v17_667(v15_121, v16_702):
                    v_junk_40 = 52
                    if v20_325[v18_335][v19_702]:
                        v24_746.v8_629(v22_172, v14_446(v18_335, v19_702))
                if v15_121 == 0:
                    v24_746.v8_629(v22_172, v1_830 * v2_419)
                if 1 + 1 == 2:
                    v20_325[v15_121][v16_702] = 1
                v27_169.v29_980(max(0, v24_746.v13_165() - v28_132 - 1))
            else:
                v27_169.v29_980(0)
        return v27_169[::-1]