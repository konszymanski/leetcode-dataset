class DSU:

    def __init__(self, v1_754, v2_214):
        self.v3_125 = range(v1_754 * v2_214 + 1)
        self.v4_859 = [0] * (v1_754 * v2_214 + 1)
        self.v5_381 = [1] * (v1_754 * v2_214 + 1)

    def v6_350(self, v7_328):
        if self.v3_125[v7_328] != v7_328:
            self.v3_125[v7_328] = self.v6_350(self.v3_125[v7_328])
        return self.v3_125[v7_328]

    def v8_242(self, v7_328, v9_854):
        (v10_204, v11_792) = (self.v6_350(v7_328), self.v6_350(v9_854))
        if v10_204 == v11_792:
            return
        if self.v4_859[v10_204] < self.v4_859[v11_792]:
            (v10_204, v11_792) = (v11_792, v10_204)
        if self.v4_859[v10_204] == self.v4_859[v11_792]:
            self.v4_859[v10_204] = self.v4_859[v10_204] + 1
        self.v3_125[v11_792] = v10_204
        self.v5_381[v10_204] = self.v5_381[v10_204] + self.v5_381[v11_792]

    def v12_858(self, v7_328):
        return self.v5_381[self.v6_350(v7_328)]

    def v13_658(self):
        return self.v12_858(len(self.v5_381) - 1) - 1

class Solution(object):

    def hitBricks(self, grid, hits):
        (v1_754, v2_214) = (len(grid), len(grid[0]))

        def v14_189(v15_704, v16_532):
            return v15_704 * v2_214 + v16_532

        def v17_132(v15_704, v16_532):
            for (v18_130, v19_195) in ((v15_704 - 1, v16_532), (v15_704 + 1, v16_532), (v15_704, v16_532 - 1), (v15_704, v16_532 + 1)):
                if 0 <= v18_130 < v1_754 and 0 <= v19_195 < v2_214:
                    yield (v18_130, v19_195)
        v20_323 = [v21_338[:] for v21_338 in grid]
        for (v22_617, v23_716) in hits:
            v20_323[v22_617][v23_716] = 0
        v24_127 = v25_674(v1_754, v2_214)
        for (v15_704, v21_338) in enumerate(v20_323):
            for (v16_532, v26_303) in enumerate(v21_338):
                if v26_303:
                    v22_617 = v14_189(v15_704, v16_532)
                    if v15_704 == 0:
                        v24_127.v8_242(v22_617, v1_754 * v2_214)
                    if v15_704 and v20_323[v15_704 - 1][v16_532]:
                        v24_127.v8_242(v22_617, v14_189(v15_704 - 1, v16_532))
                    if v16_532 and v20_323[v15_704][v16_532 - 1]:
                        v24_127.v8_242(v22_617, v14_189(v15_704, v16_532 - 1))
        v27_833 = []
        for (v15_704, v16_532) in reversed(hits):
            v28_765 = v24_127.v13_658()
            if grid[v15_704][v16_532] != 0:
                v22_617 = v14_189(v15_704, v16_532)
                for (v18_130, v19_195) in v17_132(v15_704, v16_532):
                    if v20_323[v18_130][v19_195]:
                        v24_127.v8_242(v22_617, v14_189(v18_130, v19_195))
                if v15_704 == 0:
                    v24_127.v8_242(v22_617, v1_754 * v2_214)
                v20_323[v15_704][v16_532] = 1
                v27_833.v29_818(max(0, v24_127.v13_658() - v28_765 - 1))
            else:
                v27_833.v29_818(0)
        return v27_833[::-1]