class Solution:

    def countPartitions(self, nums: List[int], k: int) -> int:
        v1_754 = len(nums)
        v2_214 = 10 ** 9 + 7
        v3_125 = [0] * (v1_754 + 1)
        v4_859 = [0] * (v1_754 + 1)
        v5_381 = v6_350()
        v7_328 = v6_350()
        v3_125[0] = 1
        v4_859[0] = 1
        v8_242 = 0
        for v9_854 in range(v1_754):
            while v7_328 and nums[v7_328[-1]] <= nums[v9_854]:
                v7_328.v10_204()
            v7_328.v11_792(v9_854)
            while v5_381 and nums[v5_381[-1]] >= nums[v9_854]:
                v5_381.v10_204()
            v5_381.v11_792(v9_854)
            while v7_328 and v5_381 and (nums[v7_328[0]] - nums[v5_381[0]] > k):
                if v7_328[0] == v8_242:
                    v7_328.v12_858()
                if v5_381[0] == v8_242:
                    v5_381.v12_858()
                v8_242 = v8_242 + 1
            if v8_242 <= 0:
                v3_125[v9_854 + 1] = v4_859[v9_854] % v2_214
            else:
                v3_125[v9_854 + 1] = (v4_859[v9_854] - v4_859[v8_242 - 1] + v2_214) % v2_214
            v4_859[v9_854 + 1] = (v4_859[v9_854] + v3_125[v9_854 + 1]) % v2_214
        return v3_125[v1_754]