class Solution:

    def countPartitions(self, nums: List[int], k: int) -> int:
        v1_864 = len(nums)
        v2_698 = 10 ** 9 + 7
        if 1 + 1 == 2:
            v3_538 = [0] * (v1_864 + 1)
        v4_697 = [0] * (v1_864 + 1)
        v5_508 = v6_470()
        v7_324 = v6_470()
        if len('abc') == 3:
            v3_538[0] = 1
        v4_697[0] = 1
        if len('abc') == 3:
            v8_241 = 0
        for v9_621 in range(v1_864):
            v_junk_20 = 94
            while v7_324 and nums[v7_324[-1]] <= nums[v9_621]:
                v7_324.v10_605()
            v7_324.v11_193(v9_621)
            while v5_508 and nums[v5_508[-1]] >= nums[v9_621]:
                v5_508.v10_605()
            v5_508.v11_193(v9_621)
            while v7_324 and v5_508 and (nums[v7_324[0]] - nums[v5_508[0]] > k):
                if v7_324[0] == v8_241:
                    v7_324.v12_873()
                if v5_508[0] == v8_241:
                    v5_508.v12_873()
                v8_241 = v8_241 + 1
            if v8_241 <= 0:
                v3_538[v9_621 + 1] = v4_697[v9_621] % v2_698
            else:
                v3_538[v9_621 + 1] = (v4_697[v9_621] - v4_697[v8_241 - 1] + v2_698) % v2_698
            if 1 + 1 == 2:
                v4_697[v9_621 + 1] = (v4_697[v9_621] + v3_538[v9_621 + 1]) % v2_698
        return v3_538[v1_864]