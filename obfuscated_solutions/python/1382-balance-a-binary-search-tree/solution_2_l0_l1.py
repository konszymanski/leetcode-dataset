class Solution:
    def balanceBST(self, root: v1_754) -> v1_754:
        if not root:
            return None
        v2_214 = v1_754(0)
        v2_214.v3_125 = root
        v4_859 = v2_214
        while v4_859.v3_125:
            if v4_859.v3_125.v5_381:
                self.v6_350(v4_859, v4_859.v3_125)
            else:
                v4_859 = v4_859.v3_125
        v7_328 = 0
        v4_859 = v2_214.v3_125
        while v4_859:
            v7_328  +=  1
            v4_859 = v4_859.v3_125
        v8_242 = 2 ** v9_854.v10_204(v9_854.v11_792(v7_328  +  1))  -  1
        self.v12_858(v2_214, v7_328 - v8_242)
        while v8_242  >  1:
            v8_242 //= 2
            self.v12_858(v2_214, v8_242)
        v13_658 = v2_214.v3_125
        v2_214 = None
        return v13_658
    def v6_350(self, v14_189: v1_754, v15_704: v1_754):
        v16_532 = v15_704.v5_381
        v15_704.v5_381 = v16_532.v3_125
        v16_532.v3_125 = v15_704
        v14_189.v3_125 = v16_532
    def v17_132(self, v14_189: v1_754, v15_704: v1_754):
        v16_532 = v15_704.v3_125
        v15_704.v3_125 = v16_532.v5_381
        v16_532.v5_381 = v15_704
        v14_189.v3_125 = v16_532
    def v12_858(self, v2_214: v1_754, v18_130: int):
        v4_859 = v2_214
        for v19_195 in range(v18_130):
            v16_532 = v4_859.v3_125
            self.v17_132(v4_859, v16_532)
            v4_859 = v4_859.v3_125
