class Solution:

    def countOfAtoms(self, formula: str) -> str:
        v1_754 = '([A - Z][a-z] * )(\\d * )|(\\() | (\\))(\\d * )'
        v2_214 = v3_125.v4_859(v1_754, formula)
        v5_381 = [v6_350(int)]
        for (v7_328, v8_242, v9_854, v10_204, v11_792) in v2_214:
            if v7_328:
                v5_381[-1][v7_328] = v5_381[-1][v7_328] + (int(v8_242) if v8_242 else 1)
            elif v9_854:
                v5_381.v12_858(v6_350(int))
            elif v10_204:
                v13_658 = v5_381.v14_189()
                if v11_792:
                    v11_792 = int(v11_792)
                    for v7_328 in v13_658:
                        v13_658[v7_328] = v13_658[v7_328] * v11_792
                for v7_328 in v13_658:
                    v5_381[-1][v7_328] = v5_381[-1][v7_328] + v13_658[v7_328]
        v15_704 = dict(sorted(v5_381[0].v16_532()))
        v17_132 = ''
        for v7_328 in v15_704:
            v17_132 = v17_132 + v7_328
            if v15_704[v7_328] > 1:
                v17_132 = v17_132 + str(v15_704[v7_328])
        return v17_132